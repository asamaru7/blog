<!doctype html>
<html lang="ko">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
					<title>블로그에 AMP를 적용하다. - 이 세상에 하나는 남기고 가자</title>
	<meta name="author" content="유영재">
	<meta name="keywords" content="android,blog,css,db,flash,git,html,ios,java,jekyll,js,laravel,linux,octopress,osx,php,programming,swift,thinking,tip,vagrant">
	
	<meta name="description" content="블로그를 리뉴얼 하다.에서 언급했던 AMP(Accelerated Mobile Pages)를 이 블로그에 적용했다. AMP를 적용한 이유는 다분히 SEO를 테스트하기 위함이다. AMP를 적용한다고 구글에서 무조건 상위에 노출시켜주는 것은 아니다. 하지만 빠른 페이지 로딩은 SEO에 도움을 주기 때문에 간접적으로 SEO에 도움이 된다. 실제로 AMP를 적용한 것은 좀 됐는데 구글에서 해당 페이지를 재색인해서 반영되는 시간을 기다리느라고 이제서야 글을 쓴다. 사실 AMP를 적용하는 것은 그리 간단하지는 않았다. AMP의 요구사항을 충족시">
	<meta name="referrer" content="always">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<link rel="shortcut icon" type="image/x-icon" href="https://blog.asamaru.net/favicon.ico"/>
	<link rel="canonical" href="https://blog.asamaru.net/2016/12/28/apply-amp/"/>
			<link rel="amphtml" href="https://blog.asamaru.net/amp/2016/12/28/apply-amp/">
	
	
			<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
		<script>
			(adsbygoogle = window.adsbygoogle || []).push({
				google_ad_client: 'ca-pub-8163803188491150',
				enable_page_level_ads: true
			});
		</script>
	
	
	<meta name="HandheldFriendly" content="True">
	<meta name="MobileOptimized" content="320">

						<link rel="dns-prefetch" href="//pagead2.googlesyndication.com">
			
	
	<meta property="og:type" content="website">
	<meta property="og:site_name" content="이 세상에 하나는 남기고 가자">
	<meta property="og:title" content="블로그에 AMP를 적용하다.">
	<meta property="og:description" content="블로그를 리뉴얼 하다.에서 언급했던 AMP(Accelerated Mobile Pages)를 이 블로그에 적용했다. AMP를 적용한 이유는 다분히 SEO를 테스트하기 위함이다. AMP를 적용한다고 구글에서 무조건 상위에 노출시켜주는 것은 아니다. 하지만 빠른 페이지 로딩은 SEO에 도움을 주기 때문에 간접적으로 SEO에 도움이 된다. 실제로 AMP를 적용한 것은 좀 됐는데 구글에서 해당 페이지를 재색인해서 반영되는 시간을 기다리느라고 이제서야 글을 쓴다. 사실 AMP를 적용하는 것은 그리 간단하지는 않았다. AMP의 요구사항을 충족시">
	<meta property="og:image" content="/res/img/post/2016/12/apply-amp-blog.png">
	

	
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:site" content="@asamaru7">
	<meta name="twitter:title" content="블로그에 AMP를 적용하다.">
	<meta name="twitter:description" content="블로그를 리뉴얼 하다.에서 언급했던 AMP(Accelerated Mobile Pages)를 이 블로그에 적용했다. AMP를 적용한 이유는 다분히 SEO를 테스트하기 위함이다. AMP를 적용한다고 구글에서 무조건 상위에 노출시켜주는 것은 아니다. 하지만 빠른 페이지 로딩은 SEO에 도움을 주기 때문에 간접적으로 SEO에 도움이 된다. 실제로 AMP를 적용한 것은 좀 됐는데 구글에서 해당 페이지를 재색인해서 반영되는 시간을 기다리느라고 이제서야 글을 쓴다. 사실 AMP를 적용하는 것은 그리 간단하지는 않았다. AMP의 요구사항을 충족시">
	<meta property="twitter:image" content="/res/img/post/2016/12/apply-amp-blog.png">
	

										<link rel="apple-touch-icon" sizes="180x180" href="/res/img/icon/180.png">
												<link rel="apple-touch-icon" sizes="76x76" href="/res/img/icon/76.png">
												<link rel="apple-touch-icon" sizes="120x120" href="/res/img/icon/120.png">
												<link rel="apple-touch-icon" sizes="152x152" href="/res/img/icon/152.png">
						
	<link rel="alternate" type="application/rss+xml" title="이 세상에 하나는 남기고 가자" href="https://blog.asamaru.net/atom.xml"/>

			<link href="/res/css/min/xf301d678f1cca5fbd6f0859cee377e3c4ca71999.css" type="text/css" rel="stylesheet" />

	 <script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "블로그에 AMP를 적용하다.",
    "author": {
        "@type": "Person",
        "name": "유영재"
    },
    "datePublished": "2016-12-28",
    "dateModified": "2016-12-28",
    "articleSection": "thinking",
    "url": "https://blog.asamaru.net/2016/12/28/apply-amp/",
    "image": {
        "@type": "ImageObject",
        "url": "https://blog.asamaru.net/res/img/post/2016/12/apply-amp-blog.png",
        "width": 355,
        "height": 413
    },
    "publisher": {
        "@type": "Organization",
        "name": "유영재",
        "logo": {
            "@type": "ImageObject",
            "url": "https://blog.asamaru.net/res/img/icon/icon.60.png",
            "width": 60,
            "height": 60
        }
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://blog.asamaru.net/2016/12/28/apply-amp/"
    }
}</script> 
			<script type="text/javascript">
			(function (i, s, o, g, r, a, m) {
				i['GoogleAnalyticsObject'] = r;
				i[r] = i[r] || function () {
						(i[r].q = i[r].q || []).push(arguments)
					}, i[r].l = 1 * new Date();
				a = s.createElement(o),
					m = s.getElementsByTagName(o)[0];
				a.async = 1;
				a.src = g;
				m.parentNode.insertBefore(a, m)
			})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

			ga('create', 'UA-65749108-2', 'auto');
			ga('send', 'pageview');
		</script>
	</head>
<body>
<header>
	<div class="dProfile">
		<a href="https://blog.asamaru.net"><img src="/res/img/icon/icon.png" width="50" height="50" alt="profile"></a>
		<h1><a href="https://blog.asamaru.net">이 세상에 하나는 남기고 가자</a></h1>
					<p>세상에 필요한 소스코드 한줄 남기고 가자</p>
				<button type="button" id="cBtnSlide"></button>
	</div>
</header>
<section class="dMainBody">
<div class="dWrapContent">
	<main id="cMainPanel" class="clearfix">
			
	<article id="cArticle" class="dArticle hentry">
		<div class="dTitle">
			<h2 class="entry-title">블로그에 AMP를 적용하다.</h2>
												<a href="https://blog.asamaru.net/category/thinking/" rel="tag">thinking</a>
									<a href="https://blog.asamaru.net/category/blog/" rel="tag">blog</a>
													<span></span>
										<time class="published " datetime="2016-12-28 15:55:06">2016.12.28. 15:55</time>
			<time class="updated hide" datetime="2016-12-28 15:55:06">2016.12.28. 15:55</time>
			<span class="vcard author hide"><span class="fn">유영재</span></span>
		</div>
		<div class="markdown-body entry-content"><p><a href="/2016/12/14/renewal-blog/">블로그를 리뉴얼 하다.</a>에서 언급했던 <a href="https://www.ampproject.org/">AMP</a>(Accelerated Mobile Pages)를 이 블로그에 적용했다.</p>
<p><img src="/res/img/post/2016/12/apply-amp-blog.png" alt="google search result" width="355" height="413" /></p>
<p>AMP를 적용한 이유는 다분히 SEO를 테스트하기 위함이다. AMP를 적용한다고 구글에서 무조건 상위에 노출시켜주는 것은 아니다. 하지만 빠른 페이지 로딩은 SEO에 도움을 주기 때문에 간접적으로 SEO에 도움이 된다.</p>
<p>실제로 AMP를 적용한 것은 좀 됐는데 구글에서 해당 페이지를 재색인해서 반영되는 시간을 기다리느라고 이제서야 글을 쓴다.</p>
<p>사실 AMP를 적용하는 것은 그리 간단하지는 않았다. AMP의 요구사항을 충족시키는 것을 간단하게 생각했으나 실제로 작업하다보니 여러가지 문제에 부딪혔다. 그중에서 몇가지와 추가적으로 알게된 사항을 나열하자면 아래와 같다.</p>
<ul>
<li>AMP 적용을 고려해서 페이지의 구조 설계해야 한다.</li>
<li>모든 이미지는 사이즈를 알고 있어야 한다.</li>
<li><a href="https://developers.google.com/amp/cache/">Google AMP Cache</a>는 페이지를 변형한다(일종의 최적화를 하고 상단에 사이트명을 출력하는 Header를 추가한다).
<ul>
<li><a href="/amp/2016/12/14/renewal-blog/">블로그를 리뉴얼 하다. - 원본</a></li>
<li><a href="https://www.google.co.kr/amp/s/blog.asamaru.net/amp/2016/12/14/renewal-blog/">블로그를 리뉴얼 하다. - Google AMP Cache에서 보여주는 화면</a></li>
<li>이로인해 페이지가 의도하지 않은 상황을 만들 수 있다. 이 블로그도 아직 몇가지를 수정해야 한다(모바일에서 우상단에 메뉴 링크가 비정상적으로 동작하는 경우가 있다).</li>
</ul></li>
<li>외부 자바스크립트를 사용하지 못하므로 스크립트에 의존하는 페이지를 구성하면 안된다
<ul>
<li>완전히 불가능한 것은 아니지만 쉽지 않다. <a href="http://stackoverflow.com/a/39363087/6736772">Google AMP best way to write JS script tag</a></li>
</ul></li>
<li>iframe에서 불려지는 페이지의 도메인은 서비스되는 도메인과 같을 수 없다.
<ul>
<li>일반적으로는 보안상 동일한 도메인을 요구하지만 여기서는 반대다. 인터넷에서 누군가가 보안상의 이유라고 하는데 정확한 이유는 확인해보지 않았다.</li>
<li>이 사항은 블로그에서 사용하는 Disqus를 AMP 페이지에도 적용하면서 알게 되었다. <a href="https://labs.tomasino.org/disqus-in-amp/">Disqus in Amp</a>라는 페이지에 잘 설명되어 있는데 Disqus를 출력할 iframe 도메인 문제를 <a href="https://s3.amazonaws.com/dangoldin.com/amp-disqus.html">page on an s3 bucket</a>로 해결한다.</li>
</ul></li>
<li>AMP Components 들의 동작이 다소 불안하다(반응형 레이아웃을 사용할 경우 : 반응형 이미지, 반응형 iframe 등).</li>
<li>AMP Components 들은 AMP 페이지가 아니더라도 사용할 수 있다(실제로 글 하단의 SNS 공유 기능이 AMP Components에서 제공하는 기능이다).</li>
</ul>
<p>그 외에도 <a href="http://schema.org/">Schema.org</a>의 적용이 필요한데 여기서도 약간의 어려움이 있다(이미지와 로고가 포함되어야 하고 사이즈도 정해준 기준에 맞춰야 하는 등).</p>
<p>주저리주저리 여러가지 이야기를 했지만 결론은 하나다.</p>
<p><strong>AMP를 직접 적용해보는 것이 가장 빨리 이해할 수 있는 방법이다.</strong></p>
<p>사실 누군가는 &quot;굳이 AMP 적용을 할 필요가 있는가?&quot;라고 이야기 한다. 나의 생각도 크게 다르지 않다. 하지만 AMP의 가이드를 따라 페이지를 제작하다보면 보다 빠른 웹페이지를 설계하고 구축할 수 있는 아이디어를 얻을 수 있을 것이다. 나 또한 앞서 이야기 한 것과 같이 다분히 실험적인 이유로 AMP를 적용해 봤다.</p>
<hr />
<p>참고로 이 블로그는 지난 글에서 이야기한 것과 같이 PHP로 직접 만든 정적 페이지 생성기에 의해 제작된다.
그래서 markdown이 파싱된 결과를 AMP에 호환되도록 변형하는데 <a href="https://github.com/Lullabot/amp-library">lullabot/amp</a>를 사용했다. 블로그다 보니 특별히 복잡한 구조가 없어서 그런지 현재까지 큰 문제없이 사용중이다.</p>
</div>
			</article>

	<section class="dShare">
	
			<amp-social-share type="facebook" data-param-app_id="1796234843959223" width="60" height="44"></amp-social-share>
		<amp-social-share type="twitter" width="60" height="44"></amp-social-share>
	<amp-social-share type="gplus" width="60" height="44"></amp-social-share>
	<amp-social-share type="pinterest" width="60" height="44"></amp-social-share>
	<amp-social-share type="linkedin" width="60" height="44"></amp-social-share>
	<amp-social-share type="email" width="60" height="44"></amp-social-share>
</section>

			<div id="disqus_thread"></div>
	<script type="text/javascript">
		var disqus_shortname = 'asamaru7'; // required: replace example with your forum shortname
		// var disqus_developer = 1; // Comment out when the site is live
		var disqus_identifier = "/2016/12/28/apply-amp/";

		/* * * DON'T EDIT BELOW THIS LINE * * */
		(function () {
			var dsq = document.createElement('script');
			dsq.type = 'text/javascript';
			dsq.async = true;
			dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
			(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		})();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
		</main>
</div>
<nav id="cSide">
	<div class="dSideBox">
										
										<dl class="dTags">
					<dt>카테고리</dt>
											<dd>
							<a href="https://blog.asamaru.net/category/android/">
								android<span>(56)</span>
							</a>
						</dd>
											<dd>
							<a href="https://blog.asamaru.net/category/blog/">
								blog<span>(3)</span>
							</a>
						</dd>
											<dd>
							<a href="https://blog.asamaru.net/category/css/">
								css<span>(3)</span>
							</a>
						</dd>
											<dd>
							<a href="https://blog.asamaru.net/category/db/">
								db<span>(6)</span>
							</a>
						</dd>
											<dd>
							<a href="https://blog.asamaru.net/category/flash/">
								flash<span>(1)</span>
							</a>
						</dd>
											<dd>
							<a href="https://blog.asamaru.net/category/git/">
								git<span>(7)</span>
							</a>
						</dd>
											<dd>
							<a href="https://blog.asamaru.net/category/html/">
								html<span>(2)</span>
							</a>
						</dd>
											<dd>
							<a href="https://blog.asamaru.net/category/ios/">
								ios<span>(23)</span>
							</a>
						</dd>
											<dd>
							<a href="https://blog.asamaru.net/category/java/">
								java<span>(5)</span>
							</a>
						</dd>
											<dd>
							<a href="https://blog.asamaru.net/category/jekyll/">
								jekyll<span>(2)</span>
							</a>
						</dd>
											<dd>
							<a href="https://blog.asamaru.net/category/js/">
								js<span>(11)</span>
							</a>
						</dd>
											<dd>
							<a href="https://blog.asamaru.net/category/laravel/">
								laravel<span>(2)</span>
							</a>
						</dd>
											<dd>
							<a href="https://blog.asamaru.net/category/linux/">
								linux<span>(27)</span>
							</a>
						</dd>
											<dd>
							<a href="https://blog.asamaru.net/category/octopress/">
								octopress<span>(8)</span>
							</a>
						</dd>
											<dd>
							<a href="https://blog.asamaru.net/category/osx/">
								osx<span>(9)</span>
							</a>
						</dd>
											<dd>
							<a href="https://blog.asamaru.net/category/php/">
								php<span>(51)</span>
							</a>
						</dd>
											<dd>
							<a href="https://blog.asamaru.net/category/programming/">
								programming<span>(1)</span>
							</a>
						</dd>
											<dd>
							<a href="https://blog.asamaru.net/category/swift/">
								swift<span>(7)</span>
							</a>
						</dd>
											<dd>
							<a href="https://blog.asamaru.net/category/thinking/">
								thinking<span>(5)</span>
							</a>
						</dd>
											<dd>
							<a href="https://blog.asamaru.net/category/tip/">
								tip<span>(16)</span>
							</a>
						</dd>
											<dd>
							<a href="https://blog.asamaru.net/category/vagrant/">
								vagrant<span>(7)</span>
							</a>
						</dd>
									</dl>
			
			
						
			
																<dl class="dArchives">
						<dt>글 보관함</dt>
													<dd class="dYear"><a href="https://blog.asamaru.net/2017/">2017 <span>(28)</span></a></dd>
															<dd>
									<dl>
										
																					<dd class="dMonth">
												<a href="https://blog.asamaru.net/2017/04/">04 <span>(2)</span></a>
											</dd>
																					<dd class="dMonth">
												<a href="https://blog.asamaru.net/2017/03/">03 <span>(2)</span></a>
											</dd>
																					<dd class="dMonth">
												<a href="https://blog.asamaru.net/2017/02/">02 <span>(2)</span></a>
											</dd>
																					<dd class="dMonth">
												<a href="https://blog.asamaru.net/2017/01/">01 <span>(22)</span></a>
											</dd>
																			</dl>
								</dd>
																				<dd class="dYear"><a href="https://blog.asamaru.net/2016/">2016 <span>(69)</span></a></dd>
															<dd>
									<dl>
										
																					<dd class="dMonth">
												<a href="https://blog.asamaru.net/2016/12/">12 <span>(9)</span></a>
											</dd>
																					<dd class="dMonth">
												<a href="https://blog.asamaru.net/2016/11/">11 <span>(11)</span></a>
											</dd>
																					<dd class="dMonth">
												<a href="https://blog.asamaru.net/2016/10/">10 <span>(2)</span></a>
											</dd>
																					<dd class="dMonth">
												<a href="https://blog.asamaru.net/2016/09/">09 <span>(2)</span></a>
											</dd>
																					<dd class="dMonth">
												<a href="https://blog.asamaru.net/2016/08/">08 <span>(2)</span></a>
											</dd>
																					<dd class="dMonth">
												<a href="https://blog.asamaru.net/2016/07/">07 <span>(5)</span></a>
											</dd>
																					<dd class="dMonth">
												<a href="https://blog.asamaru.net/2016/05/">05 <span>(1)</span></a>
											</dd>
																					<dd class="dMonth">
												<a href="https://blog.asamaru.net/2016/04/">04 <span>(9)</span></a>
											</dd>
																					<dd class="dMonth">
												<a href="https://blog.asamaru.net/2016/03/">03 <span>(13)</span></a>
											</dd>
																					<dd class="dMonth">
												<a href="https://blog.asamaru.net/2016/02/">02 <span>(7)</span></a>
											</dd>
																					<dd class="dMonth">
												<a href="https://blog.asamaru.net/2016/01/">01 <span>(8)</span></a>
											</dd>
																			</dl>
								</dd>
																				<dd class="dYear"><a href="https://blog.asamaru.net/2015/">2015 <span>(118)</span></a></dd>
															<dd>
									<dl>
										
																					<dd class="dMonth">
												<a href="https://blog.asamaru.net/2015/12/">12 <span>(16)</span></a>
											</dd>
																					<dd class="dMonth">
												<a href="https://blog.asamaru.net/2015/11/">11 <span>(16)</span></a>
											</dd>
																					<dd class="dMonth">
												<a href="https://blog.asamaru.net/2015/10/">10 <span>(41)</span></a>
											</dd>
																					<dd class="dMonth">
												<a href="https://blog.asamaru.net/2015/09/">09 <span>(37)</span></a>
											</dd>
																					<dd class="dMonth">
												<a href="https://blog.asamaru.net/2015/08/">08 <span>(8)</span></a>
											</dd>
																			</dl>
								</dd>
																				<dd class="dYear"><a href="https://blog.asamaru.net/2012/">2012 <span>(7)</span></a></dd>
															<dd>
									<dl>
										
																					<dd class="dMonth">
												<a href="https://blog.asamaru.net/2012/10/">10 <span>(1)</span></a>
											</dd>
																					<dd class="dMonth">
												<a href="https://blog.asamaru.net/2012/09/">09 <span>(6)</span></a>
											</dd>
																			</dl>
								</dd>
																		</dl>
									
				
		
		<form action="https://www.google.com/search" method="get" target="_blank" class="dFormSearch">
			<fieldset>
				<input type="hidden" name="sitesearch" value="https://blog.asamaru.net">
				<legend>검색하기 폼</legend>
				<label class="dIcon">검색하기</label>
				<input type="text" name="q" value="" placeholder="Search"/>
			</fieldset>
		</form>

		
		<ul class="dLinks">
							<li><a href="https://blog.asamaru.net/archives/" class="dInverse">전체글 보기</a></li>
				<li class="dPipe"></li>
						<li><a href="https://blog.asamaru.net/atom.xml" class="dInverse" target="_blank">RSS</a></li>
		</ul>
	</div>
</nav>



















</section>
<footer>
	hosted by <a href="https://github.com/"><em>Github</em></a> / Posted by <a href="mailto:asamaru@asamaru.net"><em>유영재</em></a>
</footer>
<script src="/res/js/min/x349a43283e7a5873772f43b311fec093ffe4cae9.js" type="text/javascript"></script>
<script>
	(function () {
		function addEvent(element, evnt, funct) {
			if (element.attachEvent)
				return element.attachEvent('on' + evnt, funct);
			else
				return element.addEventListener(evnt, funct, false);
		}

		var slideout = new Slideout({
			'panel': document.getElementById('cMainPanel'),
			'menu': document.getElementById('cSide'),
			'padding': 300,
			'tolerance': 70,
			'side': 'right'
		});
		addEvent(
			document.getElementById('cBtnSlide'),
			'click',
			function () {
				slideout.toggle();
			}
		);
	})();
</script>



<script async src="https://cdn.ampproject.org/v0.js"></script>
<script async custom-element="amp-social-share" src="https://cdn.ampproject.org/v0/amp-social-share-0.1.js"></script>

</body>
</html>