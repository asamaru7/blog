<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xml" href="https://blog.asamaru.net/feed.xslt.xml"?><feed xmlns="http://www.w3.org/2005/Atom"><generator uri="http://jekyllrb.com" version="3.2.1">Jekyll</generator><link href="https://blog.asamaru.net/atom.xml" rel="self" type="application/atom+xml" /><link href="https://blog.asamaru.net/" rel="alternate" type="text/html" /><updated>2016-12-07T21:28:17+09:00</updated><id>https://blog.asamaru.net/</id><title type="html">이 세상에 하나는 남기고 가자</title><subtitle>세상에 필요한 소스코드 한줄 남기고 가자.
</subtitle><author><name>유영재</name></author><entry><title type="html">Theme.NoDisplay 테마 사용시 안드로이드 API 23에서 did not call finish() prior to onResume() completing 오류 발생</title><link href="https://blog.asamaru.net/2016/12/07/android-theme-nodisplay-did-not-call-finish-prior-to-onresume-completing/" rel="alternate" type="text/html" title="Theme.NoDisplay 테마 사용시 안드로이드 API 23에서 did not call finish() prior to onResume() completing 오류 발생" /><published>2016-12-07T20:40:04+09:00</published><updated>2016-12-07T20:40:04+09:00</updated><id>https://blog.asamaru.net/2016/12/07/android-theme-nodisplay-did-not-call-finish-prior-to-onresume-completing</id><content type="html" xml:base="https://blog.asamaru.net/2016/12/07/android-theme-nodisplay-did-not-call-finish-prior-to-onresume-completing/">&lt;p&gt;눈에 보이지 않는 Activity를 생성하기 위해 “Theme.NoDisplay” 테마를 사용한 앱에서 오류가 발생했다. 오류 내용을 보면 onResume()이 호출되기 전에 finish()가 호출되지 않았다는 것이다.
확인해보니 “Theme.NoDisplay” 테마가 사용된 Activity는 윈도우 자체가 생성되지 않기 때문에 onResume()이 호출되기 전에 finish()가 호출되어야 하는 조건이 있다. 예를들면 아래와 같다.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NoDisplayActivity&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Activity&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;  
    &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;  
    &lt;span class=&quot;kd&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;onCreate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Bundle&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;savedInstanceState&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;  
        &lt;span class=&quot;kd&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;onCreate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;savedInstanceState&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;  
        &lt;span class=&quot;n&quot;&gt;finish&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;  
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;  
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;  
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;이와 관련된 내용은 &lt;a href=&quot;https://commonsware.com/blog/2015/11/02/psa-android-6p0-theme.nodisplay-regression.html&quot;&gt;PSA: Android 6.0 Theme.NoDisplay Regression&lt;/a&gt;에서 자세히 설명하고 있다. 이 글에 따르면 Android 6.0의 문서화되지 않은 변경으로 인해 targetSdkVersion이 23 이상에서 실행시 오류가 발생할 수 있다고 경고하고 있다.&lt;/p&gt;

&lt;p&gt;이 문제는 “Android M developer preview의 버그다(&lt;a href=&quot;https://web.archive.org/web/20151116170752/https://code.google.com/p/android-developer-preview/issues/detail?id=2353&quot;&gt;Issue 2353:	Activity crash with @android:style/Theme.NoDisplay&lt;/a&gt;)”라는 이야기도 있으나 실제 Android 6에서 오류가 발생하고 있으므로 버그라 하더라도 무시할 수 없다.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;나도 이번 작업에서 이 문제를 겪게 되었다. 나의 경우 targetSdkVersion이 24 였으며 오류가 보고된 기기는 모두 API 23(Android 6.0) 버전이었다.&lt;/p&gt;

&lt;p&gt;이 문제에 대한 근본적인 문제 해결 방법은 onCreate() 또는 onStart() 단계에서 finish()를 호출하는 것이다. 비동기 처리 등의 상황으로 인해 이렇게 할 수 없는 상황이라면 &lt;strong&gt;Theme.NoDisplay 테마를 사용하지 말고 &lt;a href=&quot;/2016/12/07/android-transparent-no-display-activity/&quot;&gt;Android 투명 / 보이지 않는 Activity 만들기(Theme.Translucent / Theme.NoDisplay)&lt;/a&gt;에서 안내한 것과 같이 투명한 Activity를 만들어서 적용하는 방법&lt;/strong&gt; 을 써야 한다.&lt;/p&gt;

&lt;p&gt;위에서 언급한 비동기 처리 외에도 requestPermissions()을 사용하는 것과 같이 startActivityForResult()를 사용하게 되는 상황 등에서도 동일한 문제가 발생할 수 있다.&lt;/p&gt;

&lt;p&gt;다른 해결 방법으로 아래와 같이 onStart() 함수에서 &lt;code class=&quot;highlighter-rouge&quot;&gt;setVisible(true);&lt;/code&gt;를 호출해서 해결했다는 이야기도 있으나 해결되지 않는다는 이야기들이 있어 안전한 방법이라고 할 수 없다.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;onStart&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;onStart&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;setVisible&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;hr /&gt;

&lt;p&gt;결론적으로 내가 생각하는 가장 쉽고 안전한 방법은 투명한 Activity를 이용해서 NoDisplay를 대체 구현하는 것이다.&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;style&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;NoDisplay&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;parent=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;android:Theme&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;android:windowIsTranslucent&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;android:windowBackground&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;@android:color/transparent&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;android:windowContentOverlay&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;@null&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;android:windowNoTitle&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;

  &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;android:windowIsFloating&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;android:backgroundDimEnabled&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;false&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;

  &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;android:colorBackgroundCacheHint&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;@null&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;android:windowAnimationStyle&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;@android:style/Animation&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;android:windowFullscreen&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/style&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;</content><author><name>유영재</name></author><summary type="html">눈에 보이지 않는 Activity를 생성하기 위해 “Theme.NoDisplay” 테마를 사용한 앱에서 오류가 발생했다. 오류 내용을 보면 onResume()이 호출되기 전에 finish()가 호출되지 않았다는 것이다.
확인해보니 “Theme.NoDisplay” 테마가 사용된 Activity는 윈도우 자체가 생성되지 않기 때문에 onResume()이 호출되기 전에 finish()가 호출되어야 하는 조건이 있다. 예를들면 아래와 같다.

public class NoDisplayActivity extends Activity {  
    @Override  
    protected void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState);  
        finish();  
    }  
}  



이와 관련된 내용은 PSA: Android 6.0 Theme.NoDisplay Regression에서 자세히 설명하고 있다. 이 글에 따르면 Android 6.0의 문서화되지 않은 변경으로 인해 targetSdkVersion이 23 이상에서 실행시 오류가 발생할 수 있다고 경고하고 있다.

이 문제는 “Android M developer preview의 버그다(Issue 2353:	Activity crash with @android:style/Theme.NoDisplay)”라는 이야기도 있으나 실제 Android 6에서 오류가 발생하고 있으므로 버그라 하더라도 무시할 수 없다.



나도 이번 작업에서 이 문제를 겪게 되었다. 나의 경우 targetSdkVersion이 24 였으며 오류가 보고된 기기는 모두 API 23(Android 6.0) 버전이었다.

이 문제에 대한 근본적인 문제 해결 방법은 onCreate() 또는 onStart() 단계에서 finish()를 호출하는 것이다. 비동기 처리 등의 상황으로 인해 이렇게 할 수 없는 상황이라면 Theme.NoDisplay 테마를 사용하지 말고 Android 투명 / 보이지 않는 Activity 만들기(Theme.Translucent / Theme.NoDisplay)에서 안내한 것과 같이 투명한 Activity를 만들어서 적용하는 방법 을 써야 한다.

위에서 언급한 비동기 처리 외에도 requestPermissions()을 사용하는 것과 같이 startActivityForResult()를 사용하게 되는 상황 등에서도 동일한 문제가 발생할 수 있다.

다른 해결 방법으로 아래와 같이 onStart() 함수에서 setVisible(true);를 호출해서 해결했다는 이야기도 있으나 해결되지 않는다는 이야기들이 있어 안전한 방법이라고 할 수 없다.

@Override
protected void onStart() {
    super.onStart();
    setVisible(true);
}





결론적으로 내가 생각하는 가장 쉽고 안전한 방법은 투명한 Activity를 이용해서 NoDisplay를 대체 구현하는 것이다.

&amp;lt;style name=&quot;NoDisplay&quot; parent=&quot;android:Theme&quot;&amp;gt;
  &amp;lt;item name=&quot;android:windowIsTranslucent&quot;&amp;gt;true&amp;lt;/item&amp;gt;
  &amp;lt;item name=&quot;android:windowBackground&quot;&amp;gt;@android:color/transparent&amp;lt;/item&amp;gt;
  &amp;lt;item name=&quot;android:windowContentOverlay&quot;&amp;gt;@null&amp;lt;/item&amp;gt;
  &amp;lt;item name=&quot;android:windowNoTitle&quot;&amp;gt;true&amp;lt;/item&amp;gt;

  &amp;lt;item name=&quot;android:windowIsFloating&quot;&amp;gt;true&amp;lt;/item&amp;gt;
  &amp;lt;item name=&quot;android:backgroundDimEnabled&quot;&amp;gt;false&amp;lt;/item&amp;gt;

  &amp;lt;item name=&quot;android:colorBackgroundCacheHint&quot;&amp;gt;@null&amp;lt;/item&amp;gt;
  &amp;lt;item name=&quot;android:windowAnimationStyle&quot;&amp;gt;@android:style/Animation&amp;lt;/item&amp;gt;
  &amp;lt;item name=&quot;android:windowFullscreen&quot;&amp;gt;true&amp;lt;/item&amp;gt;
&amp;lt;/style&amp;gt;</summary></entry><entry><title type="html">Android 투명 / 보이지 않는 Activity 만들기(Theme.Translucent / Theme.NoDisplay)</title><link href="https://blog.asamaru.net/2016/12/07/android-transparent-no-display-activity/" rel="alternate" type="text/html" title="Android 투명 / 보이지 않는 Activity 만들기(Theme.Translucent / Theme.NoDisplay)" /><published>2016-12-07T20:09:06+09:00</published><updated>2016-12-07T20:09:06+09:00</updated><id>https://blog.asamaru.net/2016/12/07/android-transparent-no-display-activity</id><content type="html" xml:base="https://blog.asamaru.net/2016/12/07/android-transparent-no-display-activity/">&lt;p&gt;안드로이드에서 투명한 배경을 가진 Activity나 눈에 보이지 않는 Activity를 만드는 방법 중 가장 쉬운 방법은 Activity의 Theme를 사용하는 것이다. 이러한 Activity를 구성하기 위해 안드로이드에서 제공되는 테마 몇가지를 알아보자.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;아래에 나오는 각 테마의 설정 내용은 Android SDK 24 기준임을 참고하기 바란다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;themetranslucent&quot;&gt;Theme.Translucent&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://kairo96.gitbooks.io/android/content/ch4.11.html&quot;&gt;&lt;/a&gt;
Theme.Translucent 테마는 안드로이드 3.0 이전부터 존재한 테마로 투명한 배경을 가진 Activity를 만들때 사용할 수 있는 테마다. 일반적으로 구버전의 안드로이드까지 정확히 지원하려면 Theme.Translucent.NoTitleBar를 사용해서 투명한 배경을 가진 Activity를 만들어야 한다.&lt;/p&gt;

&lt;p&gt;이 테마는 아래의 3가지 형태로 나뉜다. 각각의 특성은 이름과 설정 내용을 보면 바로 알 수 있다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Theme.Translucent&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;style&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Theme.Translucent&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;windowBackground&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;@color/transparent&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;colorBackgroundCacheHint&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;@null&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;windowIsTranslucent&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;&amp;lt;!-- Note that we use the base animation style here (that is no
         animations) because we really have no idea how this kind of
         activity will be used. --&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;windowAnimationStyle&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;@style/Animation&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/style&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Theme.Translucent.NoTitleBar&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;style&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Theme.Translucent.NoTitleBar&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;windowNoTitle&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;windowContentOverlay&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;@null&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/style&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;Theme.Translucent.NoTitleBar_Fullscreen&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;style&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Theme.Translucent.NoTitleBar.Fullscreen&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;windowFullscreen&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/style&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;기본적으로 제공되는 위 테마를 사용하는 것도 괜찮으나 필요하다면 아래와 같이 필요한 설정을 추가해서 재정의한 테마를 사용할 수 있다.&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;style&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;NoDisplay&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;parent=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;android:Theme&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;android:windowIsTranslucent&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;android:windowBackground&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;@android:color/transparent&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;android:windowContentOverlay&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;@null&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;android:windowNoTitle&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;

  &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;android:windowIsFloating&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;android:backgroundDimEnabled&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;false&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;

  &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;android:colorBackgroundCacheHint&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;@null&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;android:windowAnimationStyle&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;@android:style/Animation&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;android:windowFullscreen&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/style&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;themenodisplay&quot;&gt;Theme.NoDisplay&lt;/h3&gt;

&lt;p&gt;Theme.NoDisplay 테마는 Activity를 투명하게 만드는 것이 아니라 아예 보이지 않는 Activity를 만들어 준다.&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;style&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Theme.NoDisplay&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;windowBackground&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;@null&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;windowContentOverlay&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;@null&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;windowIsTranslucent&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;windowAnimationStyle&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;@null&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;windowDisablePreview&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;item&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;windowNoDisplay&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;true&lt;span class=&quot;nt&quot;&gt;&amp;lt;/item&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/style&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;이 테마를 사용할 때는 유의할 점이 있다. &lt;code class=&quot;highlighter-rouge&quot;&gt;did not call finish() prior to onResume() completing&lt;/code&gt; 오류가 발생할 수 있기 때문이다. Theme.NoDisplay 테마를 사용하는 경우에는 onResume 함수가 호출되기 전에 finish()가 호출되어야 하는데 이를 어길 경우 앱에서 오류가 발생한다.
이와 관련해서는 &lt;a href=&quot;/2016/12/07/android-theme-nodisplay-did-not-call-finish-prior-to-onresume-completing/&quot;&gt;Theme.NoDisplay 테마 사용시 안드로이드 API 23에서 did not call finish() prior to onResume() completing 오류 발생&lt;/a&gt;에서 조금 더 자세히 다룬다.&lt;/p&gt;

&lt;p&gt;마지막으로 &lt;a href=&quot;http://androidblog.reindustries.com/android-cheats-and-tips-invisible-activity/&quot;&gt;Android cheats and tips: Invisible activity&lt;/a&gt;라는 글도 참고하면 좋을 듯하다. 필요에 따라 &lt;code class=&quot;highlighter-rouge&quot;&gt;android:noHistory&lt;/code&gt;와 &lt;code class=&quot;highlighter-rouge&quot;&gt;android:excludeFromRecents=&quot;true&quot;&lt;/code&gt;를 함께 사용함으로써 history와 최근 사용 항목에 남지 않는 Activity를 생성하는 부분을 안내하고 있다.&lt;/p&gt;</content><author><name>유영재</name></author><summary type="html">안드로이드에서 투명한 배경을 가진 Activity나 눈에 보이지 않는 Activity를 만드는 방법 중 가장 쉬운 방법은 Activity의 Theme를 사용하는 것이다. 이러한 Activity를 구성하기 위해 안드로이드에서 제공되는 테마 몇가지를 알아보자.


  아래에 나오는 각 테마의 설정 내용은 Android SDK 24 기준임을 참고하기 바란다.




Theme.Translucent


Theme.Translucent 테마는 안드로이드 3.0 이전부터 존재한 테마로 투명한 배경을 가진 Activity를 만들때 사용할 수 있는 테마다. 일반적으로 구버전의 안드로이드까지 정확히 지원하려면 Theme.Translucent.NoTitleBar를 사용해서 투명한 배경을 가진 Activity를 만들어야 한다.

이 테마는 아래의 3가지 형태로 나뉜다. 각각의 특성은 이름과 설정 내용을 보면 바로 알 수 있다.


  Theme.Translucent


&amp;lt;style name=&quot;Theme.Translucent&quot;&amp;gt;
    &amp;lt;item name=&quot;windowBackground&quot;&amp;gt;@color/transparent&amp;lt;/item&amp;gt;
    &amp;lt;item name=&quot;colorBackgroundCacheHint&quot;&amp;gt;@null&amp;lt;/item&amp;gt;
    &amp;lt;item name=&quot;windowIsTranslucent&quot;&amp;gt;true&amp;lt;/item&amp;gt;
    &amp;lt;!-- Note that we use the base animation style here (that is no
         animations) because we really have no idea how this kind of
         activity will be used. --&amp;gt;
    &amp;lt;item name=&quot;windowAnimationStyle&quot;&amp;gt;@style/Animation&amp;lt;/item&amp;gt;
&amp;lt;/style&amp;gt;




  Theme.Translucent.NoTitleBar


&amp;lt;style name=&quot;Theme.Translucent.NoTitleBar&quot;&amp;gt;
    &amp;lt;item name=&quot;windowNoTitle&quot;&amp;gt;true&amp;lt;/item&amp;gt;
    &amp;lt;item name=&quot;windowContentOverlay&quot;&amp;gt;@null&amp;lt;/item&amp;gt;
&amp;lt;/style&amp;gt;




  Theme.Translucent.NoTitleBar_Fullscreen


&amp;lt;style name=&quot;Theme.Translucent.NoTitleBar.Fullscreen&quot;&amp;gt;
    &amp;lt;item name=&quot;windowFullscreen&quot;&amp;gt;true&amp;lt;/item&amp;gt;
&amp;lt;/style&amp;gt;



기본적으로 제공되는 위 테마를 사용하는 것도 괜찮으나 필요하다면 아래와 같이 필요한 설정을 추가해서 재정의한 테마를 사용할 수 있다.

&amp;lt;style name=&quot;NoDisplay&quot; parent=&quot;android:Theme&quot;&amp;gt;
  &amp;lt;item name=&quot;android:windowIsTranslucent&quot;&amp;gt;true&amp;lt;/item&amp;gt;
  &amp;lt;item name=&quot;android:windowBackground&quot;&amp;gt;@android:color/transparent&amp;lt;/item&amp;gt;
  &amp;lt;item name=&quot;android:windowContentOverlay&quot;&amp;gt;@null&amp;lt;/item&amp;gt;
  &amp;lt;item name=&quot;android:windowNoTitle&quot;&amp;gt;true&amp;lt;/item&amp;gt;

  &amp;lt;item name=&quot;android:windowIsFloating&quot;&amp;gt;true&amp;lt;/item&amp;gt;
  &amp;lt;item name=&quot;android:backgroundDimEnabled&quot;&amp;gt;false&amp;lt;/item&amp;gt;

  &amp;lt;item name=&quot;android:colorBackgroundCacheHint&quot;&amp;gt;@null&amp;lt;/item&amp;gt;
  &amp;lt;item name=&quot;android:windowAnimationStyle&quot;&amp;gt;@android:style/Animation&amp;lt;/item&amp;gt;
  &amp;lt;item name=&quot;android:windowFullscreen&quot;&amp;gt;true&amp;lt;/item&amp;gt;
&amp;lt;/style&amp;gt;





Theme.NoDisplay

Theme.NoDisplay 테마는 Activity를 투명하게 만드는 것이 아니라 아예 보이지 않는 Activity를 만들어 준다.

&amp;lt;style name=&quot;Theme.NoDisplay&quot;&amp;gt;
    &amp;lt;item name=&quot;windowBackground&quot;&amp;gt;@null&amp;lt;/item&amp;gt;
    &amp;lt;item name=&quot;windowContentOverlay&quot;&amp;gt;@null&amp;lt;/item&amp;gt;
    &amp;lt;item name=&quot;windowIsTranslucent&quot;&amp;gt;true&amp;lt;/item&amp;gt;
    &amp;lt;item name=&quot;windowAnimationStyle&quot;&amp;gt;@null&amp;lt;/item&amp;gt;
    &amp;lt;item name=&quot;windowDisablePreview&quot;&amp;gt;true&amp;lt;/item&amp;gt;
    &amp;lt;item name=&quot;windowNoDisplay&quot;&amp;gt;true&amp;lt;/item&amp;gt;
&amp;lt;/style&amp;gt;



이 테마를 사용할 때는 유의할 점이 있다. did not call finish() prior to onResume() completing 오류가 발생할 수 있기 때문이다. Theme.NoDisplay 테마를 사용하는 경우에는 onResume 함수가 호출되기 전에 finish()가 호출되어야 하는데 이를 어길 경우 앱에서 오류가 발생한다.
이와 관련해서는 Theme.NoDisplay 테마 사용시 안드로이드 API 23에서 did not call finish() prior to onResume() completing 오류 발생에서 조금 더 자세히 다룬다.

마지막으로 Android cheats and tips: Invisible activity라는 글도 참고하면 좋을 듯하다. 필요에 따라 android:noHistory와 android:excludeFromRecents=&quot;true&quot;를 함께 사용함으로써 history와 최근 사용 항목에 남지 않는 Activity를 생성하는 부분을 안내하고 있다.</summary></entry><entry><title type="html">Windows에서 네트워크 상의 공유 폴더 연결 끊기(로그인 아이디/암호를 저장했을 경우)</title><link href="https://blog.asamaru.net/2016/12/06/windows-shared-network-folder-disconnect/" rel="alternate" type="text/html" title="Windows에서 네트워크 상의 공유 폴더 연결 끊기(로그인 아이디/암호를 저장했을 경우)" /><published>2016-12-06T21:48:00+09:00</published><updated>2016-12-06T21:48:00+09:00</updated><id>https://blog.asamaru.net/2016/12/06/windows-shared-network-folder-disconnect</id><content type="html" xml:base="https://blog.asamaru.net/2016/12/06/windows-shared-network-folder-disconnect/">&lt;p&gt;네트워크 상에 공유된 폴더를 연결하게되면 아이디/암호를 넣게되는 경우가 있는데 이때 암호를 저장 했다면 이후부터는 연결시 항상 그 계정을 사용하게 된다. 흔한 경우는 아니지만 이 계정을 변경하려는 경우 기존에 저장된 계정을 제거해야 하는데 그 방법은 아래와 같은 것들이 있다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;net use * /d&lt;/code&gt; 를 사용하여 기존의 접속을 끊고 다시 연결한다.&lt;/li&gt;
  &lt;li&gt;탐색기 - 도구 - 폴더옵션 - 보기 - 모든 사용자에게 동일한 폴더 공유 권한을 지정(권장)을 체크아웃 한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;위 방법 중 하나만 적용해도 문제가 해결될 수 있으나 그렇지 않다면 아래의 방법을 사용한다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;cmd&lt;/code&gt; 실행&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;net use \\ip\공유폴더이름 /d
net use /persistent:no
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;출처 : &lt;a href=&quot;https://answers.microsoft.com/ko-kr/windows/forum/windows_xp-networking/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC/74c60ce5-6730-4e96-aef1-f945bf332cec&quot;&gt;네트워크 상의 다른 윈도우 운영체제에서 공유된 폴더에 접속시 로그인 암호를 저장 했을 경우 암호를 저장 해제하는 방법을 알려주십시요.&lt;/a&gt;&lt;/p&gt;</content><author><name>유영재</name></author><summary type="html">네트워크 상에 공유된 폴더를 연결하게되면 아이디/암호를 넣게되는 경우가 있는데 이때 암호를 저장 했다면 이후부터는 연결시 항상 그 계정을 사용하게 된다. 흔한 경우는 아니지만 이 계정을 변경하려는 경우 기존에 저장된 계정을 제거해야 하는데 그 방법은 아래와 같은 것들이 있다.


  net use * /d 를 사용하여 기존의 접속을 끊고 다시 연결한다.
  탐색기 - 도구 - 폴더옵션 - 보기 - 모든 사용자에게 동일한 폴더 공유 권한을 지정(권장)을 체크아웃 한다.


위 방법 중 하나만 적용해도 문제가 해결될 수 있으나 그렇지 않다면 아래의 방법을 사용한다.


  cmd 실행


net use \\ip\공유폴더이름 /d
net use /persistent:no



출처 : 네트워크 상의 다른 윈도우 운영체제에서 공유된 폴더에 접속시 로그인 암호를 저장 했을 경우 암호를 저장 해제하는 방법을 알려주십시요.</summary></entry><entry><title type="html">VirtualBox VM과 Vagrant 다시 연결하기</title><link href="https://blog.asamaru.net/2016/12/06/how-do-i-associate-a-vagrant-project-directory-with-an-existing-virtualbox-vm/" rel="alternate" type="text/html" title="VirtualBox VM과 Vagrant 다시 연결하기" /><published>2016-12-06T21:46:09+09:00</published><updated>2016-12-06T21:46:09+09:00</updated><id>https://blog.asamaru.net/2016/12/06/how-do-i-associate-a-vagrant-project-directory-with-an-existing-virtualbox-vm</id><content type="html" xml:base="https://blog.asamaru.net/2016/12/06/how-do-i-associate-a-vagrant-project-directory-with-an-existing-virtualbox-vm/">&lt;p&gt;&lt;a href=&quot;https://www.vagrantup.com/&quot;&gt;vagrant&lt;/a&gt;를 사용하던 중 &lt;a href=&quot;https://www.virtualbox.org/&quot;&gt;VirtualBox&lt;/a&gt;와의 연결을 잃어버린 경우 &lt;code class=&quot;highlighter-rouge&quot;&gt;vagrant up&lt;/code&gt;을 하게되면 새로운 vm을 자동으로 만들게 된다. 나의 경우는 실수로 “.vagrant” 폴더를 지워버리는 바람에 연결이 끊어져 버렸다.&lt;/p&gt;

&lt;p&gt;당연히 &lt;a href=&quot;https://www.vagrantup.com/&quot;&gt;vagrant&lt;/a&gt;가 다시 vm을 만들어도 기본 환경은 모두 구성되어 있으니 크게 문제될 것이 없어야하는 것이 정상이나 나의 경우는 vm 안에 저장된 샘플 데이터를 다시 구성하기 귀찮아서 다시 연결할 방법을 알아보았다.&lt;/p&gt;

&lt;p&gt;다시 연결하는 방법은 의외로 간단하다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;“Vagrantfile” 파일이 있는 폴더(vagrnat up을 실행하는 곳)로 이동한다.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;VBoxManage list vms&lt;/code&gt; 명령을 실행해서 기존 vm의 ID를 확인한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;VBoxManage list vms
&lt;span class=&quot;s2&quot;&gt;&quot;virtualMachine&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;“.vagrant/machines/default/virtualbox” 폴더로 이동한다. 없다면 이 경로로 폴더를 만든다.&lt;/li&gt;
  &lt;li&gt;파일명이 “id”인 파일을 만들어서 내용에 “xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx”(위에서 조회한 대상 vm의 ID)를 넣고 저장한다. 혹시라도 기존 파일이 있는 상태라면 수정하고 그 외 파일들은 지운다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;끝났다. 이제 다시 &lt;code class=&quot;highlighter-rouge&quot;&gt;vagrant up&lt;/code&gt;을 실행하면 기존 vm에 연결된 상태로 정상적으로 실행될 것이다.&lt;/p&gt;</content><author><name>유영재</name></author><summary type="html">vagrant를 사용하던 중 VirtualBox와의 연결을 잃어버린 경우 vagrant up을 하게되면 새로운 vm을 자동으로 만들게 된다. 나의 경우는 실수로 “.vagrant” 폴더를 지워버리는 바람에 연결이 끊어져 버렸다.

당연히 vagrant가 다시 vm을 만들어도 기본 환경은 모두 구성되어 있으니 크게 문제될 것이 없어야하는 것이 정상이나 나의 경우는 vm 안에 저장된 샘플 데이터를 다시 구성하기 귀찮아서 다시 연결할 방법을 알아보았다.

다시 연결하는 방법은 의외로 간단하다.


  “Vagrantfile” 파일이 있는 폴더(vagrnat up을 실행하는 곳)로 이동한다.
  VBoxManage list vms 명령을 실행해서 기존 vm의 ID를 확인한다.


$ VBoxManage list vms
&quot;virtualMachine&quot; {xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx}




  “.vagrant/machines/default/virtualbox” 폴더로 이동한다. 없다면 이 경로로 폴더를 만든다.
  파일명이 “id”인 파일을 만들어서 내용에 “xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx”(위에서 조회한 대상 vm의 ID)를 넣고 저장한다. 혹시라도 기존 파일이 있는 상태라면 수정하고 그 외 파일들은 지운다.


끝났다. 이제 다시 vagrant up을 실행하면 기존 vm에 연결된 상태로 정상적으로 실행될 것이다.</summary></entry><entry><title type="html">자바스크립트 insertAfter() 구현하기</title><link href="https://blog.asamaru.net/2016/12/06/how-to-do-insertafter-in-javascript/" rel="alternate" type="text/html" title="자바스크립트 insertAfter() 구현하기" /><published>2016-12-06T10:53:25+09:00</published><updated>2016-12-06T10:53:25+09:00</updated><id>https://blog.asamaru.net/2016/12/06/how-to-do-insertafter-in-javascript</id><content type="html" xml:base="https://blog.asamaru.net/2016/12/06/how-to-do-insertafter-in-javascript/">&lt;p&gt;javascript는 &lt;a href=&quot;http://www.w3schools.com/jsref/met_node_insertbefore.asp&quot;&gt;insertBefore()&lt;/a&gt;만 제공하고 &lt;code class=&quot;highlighter-rouge&quot;&gt;insertAfter()&lt;/code&gt; 함수는 제공하지 않는다.&lt;/p&gt;

&lt;p&gt;웹 UI 개발시 대부분 &lt;a href=&quot;https://jquery.com/&quot;&gt;jQuery&lt;/a&gt; 같은 라이브러리를 사용하니 &lt;code class=&quot;highlighter-rouge&quot;&gt;insertAfter()&lt;/code&gt; 함수를 쉽게 사용할 수 있다. 그런데 추가 라이브러리를 사용할 수 없거나 간단히 이 기능만 필요한 경우가 있다.&lt;/p&gt;

&lt;p&gt;아래는 구글 등에서 검색시 주로 발견되는 예시 소스다.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;prototype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;insertAfter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;newNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;     
  &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;parentNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;insertBefore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;newNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;nextSibling&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// 또는&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;insertAfter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;referenceNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;newNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;referenceNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;parentNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;insertBefore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;newNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;referenceNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;nextSibling&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;그런데 이 방식은 문제가 있다. 다음 노드를 찾는 &lt;code class=&quot;highlighter-rouge&quot;&gt;nextSibling&lt;/code&gt; 값이 null이 될 수 있기 때문이다(대상이 맨 마지막 노드일때).&lt;/p&gt;

&lt;p&gt;따라서 아래와 같이 사용해야 한다.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;prototype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;insertAfter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;newNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;     
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!!&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;nextSibling&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;parentNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;insertBefore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;newNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;nextSibling&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;parentNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;newNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// 또는&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;insertAfter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;referenceNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;newNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;   
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!!&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;referenceNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;nextSibling&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;referenceNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;parentNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;insertBefore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;newNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;referenceNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;nextSibling&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;referenceNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;parentNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;newNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;  
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;여기서도 &lt;code class=&quot;highlighter-rouge&quot;&gt;parentNode&lt;/code&gt;가 null인 경우에 대해서는 고려되지 않았지만 대부분의 경우 굳이 고려할 필요가 없을 것이다. 필요하다면 이 부분도 추가해주면 된다.&lt;/p&gt;</content><author><name>유영재</name></author><summary type="html">javascript는 insertBefore()만 제공하고 insertAfter() 함수는 제공하지 않는다.

웹 UI 개발시 대부분 jQuery 같은 라이브러리를 사용하니 insertAfter() 함수를 쉽게 사용할 수 있다. 그런데 추가 라이브러리를 사용할 수 없거나 간단히 이 기능만 필요한 경우가 있다.

아래는 구글 등에서 검색시 주로 발견되는 예시 소스다.

Object.prototype.insertAfter = function (newNode) {     
  this.parentNode.insertBefore(newNode, this.nextSibling);
};
// 또는
function insertAfter(referenceNode, newNode) {
  referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
}



그런데 이 방식은 문제가 있다. 다음 노드를 찾는 nextSibling 값이 null이 될 수 있기 때문이다(대상이 맨 마지막 노드일때).

따라서 아래와 같이 사용해야 한다.

Object.prototype.insertAfter = function (newNode) {     
  if (!!this.nextSibling) {
    this.parentNode.insertBefore(newNode, this.nextSibling);
  } else {
    this.parentNode.appendChild(newNode);
  }
};
// 또는
function insertAfter(referenceNode, newNode) {   
  if (!!referenceNode.nextSibling) {
    referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
  } else {
    referenceNode.parentNode.appendChild(newNode);
  }  
}



여기서도 parentNode가 null인 경우에 대해서는 고려되지 않았지만 대부분의 경우 굳이 고려할 필요가 없을 것이다. 필요하다면 이 부분도 추가해주면 된다.</summary></entry><entry><title type="html">Max OSX에 PHP (5.3 ~ 7.1) 바이너리 패키지 설치</title><link href="https://blog.asamaru.net/2016/11/23/php-5-3-to-7-1-for-os-x-macos-10-6-to-10-12as-binary-package/" rel="alternate" type="text/html" title="Max OSX에 PHP (5.3 ~ 7.1) 바이너리 패키지 설치" /><published>2016-11-23T22:30:00+09:00</published><updated>2016-11-23T22:30:00+09:00</updated><id>https://blog.asamaru.net/2016/11/23/php-5-3-to-7-1-for-os-x-macos-10-6-to-10-12as-binary-package</id><content type="html" xml:base="https://blog.asamaru.net/2016/11/23/php-5-3-to-7-1-for-os-x-macos-10-6-to-10-12as-binary-package/">&lt;p&gt;대부분의 PHP 작업은 &lt;a href=&quot;https://www.vagrantup.com/&quot;&gt;vagrant&lt;/a&gt;를 사용해서 linux에서 한다. 하지만 경우에 따라 OSX에서도 PHP 실행이 필요하다. 이럴때 주로 사용하는 PHP 버전과 OSX에서 제공하는 PHP의 버전이 다를 경우 다소 불편해서 가급적 버전을 맞추어 사용한다.&lt;/p&gt;

&lt;p&gt;이런 상황에서 유용한 것이 &lt;a href=&quot;https://php-osx.liip.ch/&quot;&gt;PHP 5.3 to 7.1 for OS X / macOS 10.6 to 10.12 as binary package&lt;/a&gt;에서 제공하는 바이너리 패키지이다. 쉘 스크립트 한줄로 원하는 PHP 버전을 설치해 준다(/usr/local/php5에 설치한다).&lt;/p&gt;

&lt;p&gt;이 패키지는 OSX 10.6부터 10.12(OS X 10.6 Snow Leopard, OS X 10.7 Lion, OS X 10.8 Mountain Lion, OS X 10.9 Mavericks, OS X 10.10 Yosemite, OS X 10.11 El Capitan, macOS 10.12 Sierra)를 지원하며 PHP 7.1 / 7.0 / 5.6 / 5.5 / 5.4 / 5.3을 선택할 수 있다.&lt;/p&gt;

&lt;p&gt;아래는 각 버전별 설치 방법이다. OSX 버전은 상관없다. 설치 스크립트 내에서 OSX 버전에 따라 처리한다. 그리고 설치 과정에서 &lt;code class=&quot;highlighter-rouge&quot;&gt;sudo&lt;/code&gt; 권한이 요구된다(비밀번호 입력을 요구할 수 있다).&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;PHP 7.1 (release candidate)&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;curl -s https://php-osx.liip.ch/install.sh | bash -s 7.1
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;PHP 7.0 (Current stable)&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;curl -s https://php-osx.liip.ch/install.sh | bash -s 7.0
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;PHP 5.6 (Current stable)&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;curl -s https://php-osx.liip.ch/install.sh | bash -s 5.6
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;PHP 5.5 (Old stable)&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;curl -s https://php-osx.liip.ch/install.sh | bash -s 5.5
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;PHP 5.4 (End of life)&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;curl -s https://php-osx.liip.ch/install.sh | bash -s 5.4
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;PHP 5.3 (End of life)&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;curl -s https://php-osx.liip.ch/install.sh | bash -s 5.3
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;설치 후에는 &lt;code class=&quot;highlighter-rouge&quot;&gt;/usr/local/php5/php.d/99-liip-developer.ini&lt;/code&gt;를 수정해야 한다. Timezone이 &lt;code class=&quot;highlighter-rouge&quot;&gt;date.timezone = Europe/Zurich&lt;/code&gt;로 기본 설정되어 있어 &lt;code class=&quot;highlighter-rouge&quot;&gt;date.timezone = Asia/Seoul&lt;/code&gt;로 변경한다. Timezone이 크게 중요하지 않거나 App에서 자체적으로 설정하고 있다면 굳이 바꾸지 않아도 된다.&lt;/p&gt;

&lt;p&gt;그외 설치 상에서 발생하는 오류나 추가적 내용은 &lt;a href=&quot;https://php-osx.liip.ch/&quot;&gt;위 사이트&lt;/a&gt;를 참고하자(FAQ, 포함 Extentions 등이 안내되어 있다).&lt;/p&gt;</content><author><name>유영재</name></author><summary type="html">대부분의 PHP 작업은 vagrant를 사용해서 linux에서 한다. 하지만 경우에 따라 OSX에서도 PHP 실행이 필요하다. 이럴때 주로 사용하는 PHP 버전과 OSX에서 제공하는 PHP의 버전이 다를 경우 다소 불편해서 가급적 버전을 맞추어 사용한다.

이런 상황에서 유용한 것이 PHP 5.3 to 7.1 for OS X / macOS 10.6 to 10.12 as binary package에서 제공하는 바이너리 패키지이다. 쉘 스크립트 한줄로 원하는 PHP 버전을 설치해 준다(/usr/local/php5에 설치한다).

이 패키지는 OSX 10.6부터 10.12(OS X 10.6 Snow Leopard, OS X 10.7 Lion, OS X 10.8 Mountain Lion, OS X 10.9 Mavericks, OS X 10.10 Yosemite, OS X 10.11 El Capitan, macOS 10.12 Sierra)를 지원하며 PHP 7.1 / 7.0 / 5.6 / 5.5 / 5.4 / 5.3을 선택할 수 있다.

아래는 각 버전별 설치 방법이다. OSX 버전은 상관없다. 설치 스크립트 내에서 OSX 버전에 따라 처리한다. 그리고 설치 과정에서 sudo 권한이 요구된다(비밀번호 입력을 요구할 수 있다).

PHP 7.1 (release candidate)

$ curl -s https://php-osx.liip.ch/install.sh | bash -s 7.1



PHP 7.0 (Current stable)

$ curl -s https://php-osx.liip.ch/install.sh | bash -s 7.0



PHP 5.6 (Current stable)

$ curl -s https://php-osx.liip.ch/install.sh | bash -s 5.6



PHP 5.5 (Old stable)

$ curl -s https://php-osx.liip.ch/install.sh | bash -s 5.5



PHP 5.4 (End of life)

$ curl -s https://php-osx.liip.ch/install.sh | bash -s 5.4



PHP 5.3 (End of life)

$ curl -s https://php-osx.liip.ch/install.sh | bash -s 5.3



설치 후에는 /usr/local/php5/php.d/99-liip-developer.ini를 수정해야 한다. Timezone이 date.timezone = Europe/Zurich로 기본 설정되어 있어 date.timezone = Asia/Seoul로 변경한다. Timezone이 크게 중요하지 않거나 App에서 자체적으로 설정하고 있다면 굳이 바꾸지 않아도 된다.

그외 설치 상에서 발생하는 오류나 추가적 내용은 위 사이트를 참고하자(FAQ, 포함 Extentions 등이 안내되어 있다).</summary></entry><entry><title type="html">Chrome에서 구글 시작 페이지가 한국이 아닌 다른 나라로 나올 경우</title><link href="https://blog.asamaru.net/2016/11/21/chrome-google-start-country/" rel="alternate" type="text/html" title="Chrome에서 구글 시작 페이지가 한국이 아닌 다른 나라로 나올 경우" /><published>2016-11-21T21:07:59+09:00</published><updated>2016-11-21T21:07:59+09:00</updated><id>https://blog.asamaru.net/2016/11/21/chrome-google-start-country</id><content type="html" xml:base="https://blog.asamaru.net/2016/11/21/chrome-google-start-country/">&lt;p&gt;Chrome을 열면 시작 페이지가 &lt;a href=&quot;https://www.google.co.kr&quot;&gt;구글-한국&lt;/a&gt;이 떠야 하는데 이상하게 &lt;a href=&quot;https://www.google.co.jp&quot;&gt;구글-일본&lt;/a&gt; 등으로 뜨는 경우가 있다. 주변에서 이런 경우를 보면 어쩌다 한번만 그런게 아니라 한번 발생하면 지속적으로 해당 국가의 구글이 뜬다. Chrome의 설정이나 계정 정보에 관련 정보가 저장되어서 그런 경우도 있다고 하나 관련 정보를 모두 수정하고 캐시 정보를 모두 지워도 문제가 해결되지 않는 경우가 있다. 이런 경우는 아마도 사용자의 IP를 보고 국가를 판단하는 것으로 보인다.&lt;/p&gt;

&lt;p&gt;관련해서 &lt;a href=&quot;https://productforums.google.com/forum/#!msg/chrome-ko/9ho5EKK3a5c/Kfh2xzEaqFMJ&quot;&gt;Chrome 사용자 게시판 - 구글, 크롬 국가 변경&lt;/a&gt; 이라는 글을 보면 답변 내용 중에 아래의 내용이 있다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Google 검색은 사용자의 검색 설정, 위치 설정(위치는 IP 주소, 위치 기록, Wi-Fi 연결, www.google.com/preferences 페이지에서 설정한 위치 등)을 토대로 파악하여 사용자를 알맞는 Google 도메인으로 리디렉트 시킵니다. 예를 들어서 미국에서 Google 검색을 수행하면, Google.com 도메인으로, 프랑스에서 Google 검색을 하면 google.com 대신 google.fr 도메인으로 사용자를 이동시킵니다. 한국에서 검색을 한다면 당연히 google.co.kr 로 이동시켜야 하는 것이 맞습니다만, google.co.jp 로 잘못 리디렉트된다면, 다음 몇 가지 방법을 통해 원하는 Google 도메인을 방문할 수 있습니다.&lt;/p&gt;

  &lt;ol&gt;
    &lt;li&gt;
      &lt;p&gt;잘못된 Google 사이트로 연결된다면, Google에서 사용자의 IP 주소를 잘못 감지했을 수 있으며, &lt;a href=&quot;https://support.google.com/websearch/contact/ip&quot;&gt;문제를 신고&lt;/a&gt;하면 Google에서 사용자의 IP 주소를 업데이트해 줄 수 있습니다. 보통 매우 신속하게 문제가 해결되지만 최대 한 달이 걸릴 수도 있다 합니다.&lt;/p&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;p&gt;&lt;a href=&quot;https://support.google.com/websearch/answer/179386&quot;&gt;개인 검색 설정 및 위치 설정&lt;/a&gt; 등을 검토해보시고, 필요하면, Google에서 위치를 변경할 수 있습니다.&lt;/p&gt;
    &lt;/li&gt;
    &lt;li&gt;
      &lt;p&gt;언제든지, www.google.co.jp 대신 google.com 또는 google.co.kr 등 원하는 도메인을 바로 방문할 수 있습니다. 구체적인 해결방법은 다음 예시를 참고하세요.
영문 Google 도메인 방문하는 방법: http://www.google.com/ncr 를 클릭하거나, http://www.google.com/ncr 을 북마크에 추가합니다.
한국 Google 도메인을 방문하는 방법: http://www.google.co.kr/ncr 를 클릭하거나, http://www.google.co.kr/ncr 를 북마크에 추가합니다.
여기서 NCR는 No Country Redirect 를 의미합니다. 같은 방법으로 한국에서 프랑스 도메인으로 이동하려면, www.google.fr 를 입력할 것이 아니라, Chrome 주소창에 www.google.fr/ncr 를 입력해야 합니다.&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;이 내용 중에 있는 것처럼 http://www.google.co.kr/ncr 를 접속한 후 브라우저를 껐다 켜면 정상적으로 구글 한국으로 접속되는 경우가 있으니 한번 시도해보길 바란다. 그리고 위 답변처럼 &lt;a href=&quot;https://support.google.com/websearch/contact/ip&quot;&gt;IP 문제 신고&lt;/a&gt;를 하는 것이 가장 확실한 해결책인 것으로 보인다.&lt;/p&gt;</content><author><name>유영재</name></author><summary type="html">Chrome을 열면 시작 페이지가 구글-한국이 떠야 하는데 이상하게 구글-일본 등으로 뜨는 경우가 있다. 주변에서 이런 경우를 보면 어쩌다 한번만 그런게 아니라 한번 발생하면 지속적으로 해당 국가의 구글이 뜬다. Chrome의 설정이나 계정 정보에 관련 정보가 저장되어서 그런 경우도 있다고 하나 관련 정보를 모두 수정하고 캐시 정보를 모두 지워도 문제가 해결되지 않는 경우가 있다. 이런 경우는 아마도 사용자의 IP를 보고 국가를 판단하는 것으로 보인다.

관련해서 Chrome 사용자 게시판 - 구글, 크롬 국가 변경 이라는 글을 보면 답변 내용 중에 아래의 내용이 있다.


  Google 검색은 사용자의 검색 설정, 위치 설정(위치는 IP 주소, 위치 기록, Wi-Fi 연결, www.google.com/preferences 페이지에서 설정한 위치 등)을 토대로 파악하여 사용자를 알맞는 Google 도메인으로 리디렉트 시킵니다. 예를 들어서 미국에서 Google 검색을 수행하면, Google.com 도메인으로, 프랑스에서 Google 검색을 하면 google.com 대신 google.fr 도메인으로 사용자를 이동시킵니다. 한국에서 검색을 한다면 당연히 google.co.kr 로 이동시켜야 하는 것이 맞습니다만, google.co.jp 로 잘못 리디렉트된다면, 다음 몇 가지 방법을 통해 원하는 Google 도메인을 방문할 수 있습니다.

  
    
      잘못된 Google 사이트로 연결된다면, Google에서 사용자의 IP 주소를 잘못 감지했을 수 있으며, 문제를 신고하면 Google에서 사용자의 IP 주소를 업데이트해 줄 수 있습니다. 보통 매우 신속하게 문제가 해결되지만 최대 한 달이 걸릴 수도 있다 합니다.
    
    
      개인 검색 설정 및 위치 설정 등을 검토해보시고, 필요하면, Google에서 위치를 변경할 수 있습니다.
    
    
      언제든지, www.google.co.jp 대신 google.com 또는 google.co.kr 등 원하는 도메인을 바로 방문할 수 있습니다. 구체적인 해결방법은 다음 예시를 참고하세요.
영문 Google 도메인 방문하는 방법: http://www.google.com/ncr 를 클릭하거나, http://www.google.com/ncr 을 북마크에 추가합니다.
한국 Google 도메인을 방문하는 방법: http://www.google.co.kr/ncr 를 클릭하거나, http://www.google.co.kr/ncr 를 북마크에 추가합니다.
여기서 NCR는 No Country Redirect 를 의미합니다. 같은 방법으로 한국에서 프랑스 도메인으로 이동하려면, www.google.fr 를 입력할 것이 아니라, Chrome 주소창에 www.google.fr/ncr 를 입력해야 합니다.
    
  


이 내용 중에 있는 것처럼 http://www.google.co.kr/ncr 를 접속한 후 브라우저를 껐다 켜면 정상적으로 구글 한국으로 접속되는 경우가 있으니 한번 시도해보길 바란다. 그리고 위 답변처럼 IP 문제 신고를 하는 것이 가장 확실한 해결책인 것으로 보인다.</summary></entry><entry><title type="html">PHP 한글 slug</title><link href="https://blog.asamaru.net/2016/11/21/php-hangul-slug/" rel="alternate" type="text/html" title="PHP 한글 slug" /><published>2016-11-21T20:11:27+09:00</published><updated>2016-11-21T20:11:27+09:00</updated><id>https://blog.asamaru.net/2016/11/21/php-hangul-slug</id><content type="html" xml:base="https://blog.asamaru.net/2016/11/21/php-hangul-slug/">&lt;p&gt;&lt;a href=&quot;http://bingles1600.blogspot.kr/2012/04/slug.html&quot;&gt;“슬러그(Slug)란?”&lt;/a&gt; 글을 보면 slug에 대해 잘 설명되어 있다.&lt;/p&gt;

&lt;p&gt;PHP로 작업 중 한글로 된 이름을 URL에서 사용하기에 적합한 slug로 변환하는 것이 필요해 몇가지 자료를 참고해서 간단히 작성했다(짜집기). 간단하게 사용하려고 만든 것이다 보니 충분한 테스트가 된 코드는 아니다. 따라서 처리 과정에 대한 참고 자료로 활용하길 바란다(크게 중요한 부분이 아니라면 그대로 가져다 써도 큰 문제는 없을 듯하다).&lt;/p&gt;

&lt;div class=&quot;language-php highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?php&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Hangul&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;slug&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[])&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;c1&quot;&gt;// Make sure string is in UTF-8 and strip invalid UTF-8 characters
&lt;/span&gt;		&lt;span class=&quot;nv&quot;&gt;$str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;mb_convert_encoding&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'UTF-8'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;mb_list_encodings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt;

		&lt;span class=&quot;nv&quot;&gt;$defaults&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
			&lt;span class=&quot;s1&quot;&gt;'delimiter'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'-'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
			&lt;span class=&quot;s1&quot;&gt;'limit'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
			&lt;span class=&quot;s1&quot;&gt;'lowercase'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
			&lt;span class=&quot;s1&quot;&gt;'replacements'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt;
			&lt;span class=&quot;s1&quot;&gt;'transliterate'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
		&lt;span class=&quot;c1&quot;&gt;// Merge options
&lt;/span&gt;		&lt;span class=&quot;nv&quot;&gt;$options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;array_merge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$defaults&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

		&lt;span class=&quot;c1&quot;&gt;// Make custom replacements
&lt;/span&gt;		&lt;span class=&quot;nv&quot;&gt;$str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;preg_replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;array_keys&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'replacements'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'replacements'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

		&lt;span class=&quot;c1&quot;&gt;// Transliterate characters to ASCII
&lt;/span&gt;		&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'transliterate'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;nv&quot;&gt;$str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;han2eng&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

		&lt;span class=&quot;c1&quot;&gt;// Replace non-alphanumeric characters with our delimiter
&lt;/span&gt;		&lt;span class=&quot;nv&quot;&gt;$str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;preg_replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/[^\p{L}\p{Nd}]+/u'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'delimiter'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

		&lt;span class=&quot;c1&quot;&gt;// Remove duplicate delimiters
&lt;/span&gt;		&lt;span class=&quot;nv&quot;&gt;$str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;preg_replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'/('&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;preg_quote&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'delimiter'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'/'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'){2,}/'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'$1'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

		&lt;span class=&quot;c1&quot;&gt;// Truncate slug to max. characters
&lt;/span&gt;		&lt;span class=&quot;nv&quot;&gt;$str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;mb_substr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'limit'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'limit'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;mb_strlen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'UTF-8'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'UTF-8'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

		&lt;span class=&quot;c1&quot;&gt;// Remove delimiter from ends
&lt;/span&gt;		&lt;span class=&quot;nv&quot;&gt;$str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'delimiter'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;

		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'lowercase'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;mb_strtolower&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'UTF-8'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

	&lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;han2eng&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;cm&quot;&gt;/* 초중성에 대응하는 영문 알파벳 배열화 */&lt;/span&gt;
		&lt;span class=&quot;c1&quot;&gt;// $LCtable = array(&quot;ㄱ&quot;, &quot;ㄲ&quot;, &quot;ㄴ&quot;, &quot;ㄷ&quot;, &quot;ㄸ&quot;, &quot;ㄹ&quot;, &quot;ㅁ&quot;, &quot;ㅂ&quot;, &quot;ㅃ&quot;, &quot;ㅅ&quot;, &quot;ㅆ&quot;, &quot;ㅇ&quot;, &quot;ㅈ&quot;, &quot;ㅉ&quot;, &quot;ㅊ&quot;, &quot;ㅋ&quot;, &quot;ㅌ&quot;, &quot;ㅍ&quot;, &quot;ㅎ&quot;);
&lt;/span&gt;		&lt;span class=&quot;c1&quot;&gt;// $MVtable = array(&quot;ㅏ&quot;, &quot;ㅐ&quot;, &quot;ㅑ&quot;, &quot;ㅒ&quot;, &quot;ㅓ&quot;, &quot;ㅔ&quot;, &quot;ㅕ&quot;, &quot;ㅖ&quot;, &quot;ㅗ&quot;, &quot;ㅘ&quot;, &quot;ㅙ&quot;, &quot;ㅚ&quot;, &quot;ㅛ&quot;, &quot;ㅜ&quot;, &quot;ㅝ&quot;, &quot;ㅞ&quot;, &quot;ㅟ&quot;, &quot;ㅠ&quot;, &quot;ㅡ&quot;, &quot;ㅢ&quot;, &quot;ㅣ&quot;);
&lt;/span&gt;		&lt;span class=&quot;c1&quot;&gt;// $TCtable = array(&quot;&quot;, &quot;ㄱ&quot;, &quot;ㄲ&quot;, &quot;ㄳ&quot;, &quot;ㄴ&quot;, &quot;ㄵ&quot;, &quot;ㄶ&quot;, &quot;ㄷ&quot;, &quot;ㄹ&quot;, &quot;ㄺ&quot;, &quot;ㄻ&quot;, &quot;ㄼ&quot;, &quot;ㄽ&quot;, &quot;ㄾ&quot;, &quot;ㄿ&quot;, &quot;ㅀ&quot;, &quot;ㅁ&quot;, &quot;ㅂ&quot;, &quot;ㅄ&quot;, &quot;ㅅ&quot;, &quot;ㅆ&quot;, &quot;ㅇ&quot;, &quot;ㅈ&quot;, &quot;ㅊ&quot;, &quot;ㅋ&quot;, &quot;ㅌ&quot;, &quot;ㅍ&quot;, &quot;ㅎ&quot;);
&lt;/span&gt;
		&lt;span class=&quot;nv&quot;&gt;$LCetable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;k&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;kk&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;n&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;d&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;tt&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;l&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;m&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;b&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;pp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;s&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ss&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;j&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;jj&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ch&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;k&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;t&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;p&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;h&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
		&lt;span class=&quot;nv&quot;&gt;$MVetable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ae&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ya&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;yae&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;eo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;e&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;yeo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ye&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;o&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;wa&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;wae&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;oe&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;yo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;u&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;wo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;we&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;wi&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;yu&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;eu&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ui&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;i&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
		&lt;span class=&quot;nv&quot;&gt;$TCetable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;g&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;kk&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;k&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;n&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;n&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;n&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;t&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;l&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;l&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;l&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;l&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;l&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;l&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;l&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;l&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;m&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;p&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;p&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;s&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ss&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ng&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;j&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;ch&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;k&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;t&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;p&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;h&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

		&lt;span class=&quot;nv&quot;&gt;$returnValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

		&lt;span class=&quot;c1&quot;&gt;// UTF-8로 변환된 문장을 유니코드로 변환한다.
&lt;/span&gt;		&lt;span class=&quot;nv&quot;&gt;$result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;utf8ToUnicode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

		&lt;span class=&quot;c1&quot;&gt;// 유니코드로 변환된 글이 한글코드 안에 있으면 초중성으로 분리한다
&lt;/span&gt;		&lt;span class=&quot;c1&quot;&gt;// 원본에서 약간 수정함. 한글 외 글자에서 중복패턴이 나오는 부분 수정함.
&lt;/span&gt;		&lt;span class=&quot;c1&quot;&gt;// 단, 한글외 [0-9a-Z]는 확인했지만 그 외 문자에서는 확인 해 보지 않음.
&lt;/span&gt;		&lt;span class=&quot;k&quot;&gt;foreach&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$result&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;AS&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$val&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;44032&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$val&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;55203&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
				&lt;span class=&quot;nv&quot;&gt;$chr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
				&lt;span class=&quot;nv&quot;&gt;$code&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
				&lt;span class=&quot;nv&quot;&gt;$temp1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$code&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;44032&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
				&lt;span class=&quot;nv&quot;&gt;$T&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$temp1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
				&lt;span class=&quot;nv&quot;&gt;$temp1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;28&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
				&lt;span class=&quot;nv&quot;&gt;$V&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$temp1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
				&lt;span class=&quot;nv&quot;&gt;$temp1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
				&lt;span class=&quot;nv&quot;&gt;$L&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$temp1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
				&lt;span class=&quot;nv&quot;&gt;$chr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$LCetable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$L&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$MVetable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$V&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$TCetable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;

				&lt;span class=&quot;nv&quot;&gt;$returnValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;ucfirst&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$chr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
			&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
				&lt;span class=&quot;nv&quot;&gt;$returnValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;.=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;chr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
			&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$returnValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

	&lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;utf8ToUnicode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;nv&quot;&gt;$unicode&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[];&lt;/span&gt;
		&lt;span class=&quot;nv&quot;&gt;$values&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[];&lt;/span&gt;
		&lt;span class=&quot;nv&quot;&gt;$lookingFor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

		&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;strlen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;nv&quot;&gt;$thisValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;ord&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]);&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$thisValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;128&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
				&lt;span class=&quot;nv&quot;&gt;$unicode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$thisValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
			&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
				&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$values&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
					&lt;span class=&quot;nv&quot;&gt;$lookingFor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$thisValue&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;224&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
				&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
				&lt;span class=&quot;nv&quot;&gt;$values&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$thisValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
				&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$values&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$lookingFor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

					&lt;span class=&quot;nv&quot;&gt;$number&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$lookingFor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt;
						&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$values&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4096&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$values&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$values&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
						&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$values&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$values&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

					&lt;span class=&quot;nv&quot;&gt;$unicode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
					&lt;span class=&quot;nv&quot;&gt;$values&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[];&lt;/span&gt;
					&lt;span class=&quot;nv&quot;&gt;$lookingFor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
				&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
			&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$unicode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;참고자료 :&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://gist.github.com/sgmurphy/3098978&quot;&gt;URL Slugs in PHP (with UTF-8 and Transliteration Support)&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://bluebreeze.co.kr/818&quot;&gt;PHP han2eng&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>유영재</name></author><summary type="html">“슬러그(Slug)란?” 글을 보면 slug에 대해 잘 설명되어 있다.

PHP로 작업 중 한글로 된 이름을 URL에서 사용하기에 적합한 slug로 변환하는 것이 필요해 몇가지 자료를 참고해서 간단히 작성했다(짜집기). 간단하게 사용하려고 만든 것이다 보니 충분한 테스트가 된 코드는 아니다. 따라서 처리 과정에 대한 참고 자료로 활용하길 바란다(크게 중요한 부분이 아니라면 그대로 가져다 써도 큰 문제는 없을 듯하다).

&amp;lt;?php

class Hangul
{
	static public function slug($str, $options = [])
	{
		// Make sure string is in UTF-8 and strip invalid UTF-8 characters
		$str = mb_convert_encoding((string)$str, 'UTF-8', mb_list_encodings());

		$defaults = [
			'delimiter' =&amp;gt; '-',
			'limit' =&amp;gt; null,
			'lowercase' =&amp;gt; true,
			'replacements' =&amp;gt; [],
			'transliterate' =&amp;gt; true,
		];
		// Merge options
		$options = array_merge($defaults, $options);

		// Make custom replacements
		$str = preg_replace(array_keys($options['replacements']), $options['replacements'], $str);

		// Transliterate characters to ASCII
		if ($options['transliterate']) {
			$str = static::han2eng($str);
		}

		// Replace non-alphanumeric characters with our delimiter
		$str = preg_replace('/[^\p{L}\p{Nd}]+/u', $options['delimiter'], $str);

		// Remove duplicate delimiters
		$str = preg_replace('/(' . preg_quote($options['delimiter'], '/') . '){2,}/', '$1', $str);

		// Truncate slug to max. characters
		$str = mb_substr($str, 0, ($options['limit'] ? $options['limit'] : mb_strlen($str, 'UTF-8')), 'UTF-8');

		// Remove delimiter from ends
		$str = trim($str, $options['delimiter']);

		return $options['lowercase'] ? mb_strtolower($str, 'UTF-8') : $str;
	}

	static private function han2eng($text)
	{
		/* 초중성에 대응하는 영문 알파벳 배열화 */
		// $LCtable = array(&quot;ㄱ&quot;, &quot;ㄲ&quot;, &quot;ㄴ&quot;, &quot;ㄷ&quot;, &quot;ㄸ&quot;, &quot;ㄹ&quot;, &quot;ㅁ&quot;, &quot;ㅂ&quot;, &quot;ㅃ&quot;, &quot;ㅅ&quot;, &quot;ㅆ&quot;, &quot;ㅇ&quot;, &quot;ㅈ&quot;, &quot;ㅉ&quot;, &quot;ㅊ&quot;, &quot;ㅋ&quot;, &quot;ㅌ&quot;, &quot;ㅍ&quot;, &quot;ㅎ&quot;);
		// $MVtable = array(&quot;ㅏ&quot;, &quot;ㅐ&quot;, &quot;ㅑ&quot;, &quot;ㅒ&quot;, &quot;ㅓ&quot;, &quot;ㅔ&quot;, &quot;ㅕ&quot;, &quot;ㅖ&quot;, &quot;ㅗ&quot;, &quot;ㅘ&quot;, &quot;ㅙ&quot;, &quot;ㅚ&quot;, &quot;ㅛ&quot;, &quot;ㅜ&quot;, &quot;ㅝ&quot;, &quot;ㅞ&quot;, &quot;ㅟ&quot;, &quot;ㅠ&quot;, &quot;ㅡ&quot;, &quot;ㅢ&quot;, &quot;ㅣ&quot;);
		// $TCtable = array(&quot;&quot;, &quot;ㄱ&quot;, &quot;ㄲ&quot;, &quot;ㄳ&quot;, &quot;ㄴ&quot;, &quot;ㄵ&quot;, &quot;ㄶ&quot;, &quot;ㄷ&quot;, &quot;ㄹ&quot;, &quot;ㄺ&quot;, &quot;ㄻ&quot;, &quot;ㄼ&quot;, &quot;ㄽ&quot;, &quot;ㄾ&quot;, &quot;ㄿ&quot;, &quot;ㅀ&quot;, &quot;ㅁ&quot;, &quot;ㅂ&quot;, &quot;ㅄ&quot;, &quot;ㅅ&quot;, &quot;ㅆ&quot;, &quot;ㅇ&quot;, &quot;ㅈ&quot;, &quot;ㅊ&quot;, &quot;ㅋ&quot;, &quot;ㅌ&quot;, &quot;ㅍ&quot;, &quot;ㅎ&quot;);

		$LCetable = [&quot;k&quot;, &quot;kk&quot;, &quot;n&quot;, &quot;d&quot;, &quot;tt&quot;, &quot;l&quot;, &quot;m&quot;, &quot;b&quot;, &quot;pp&quot;, &quot;s&quot;, &quot;ss&quot;, &quot;&quot;, &quot;j&quot;, &quot;jj&quot;, &quot;ch&quot;, &quot;k&quot;, &quot;t&quot;, &quot;p&quot;, &quot;h&quot;];
		$MVetable = [&quot;a&quot;, &quot;ae&quot;, &quot;ya&quot;, &quot;yae&quot;, &quot;eo&quot;, &quot;e&quot;, &quot;yeo&quot;, &quot;ye&quot;, &quot;o&quot;, &quot;wa&quot;, &quot;wae&quot;, &quot;oe&quot;, &quot;yo&quot;, &quot;u&quot;, &quot;wo&quot;, &quot;we&quot;, &quot;wi&quot;, &quot;yu&quot;, &quot;eu&quot;, &quot;ui&quot;, &quot;i&quot;];
		$TCetable = [&quot;&quot;, &quot;g&quot;, &quot;kk&quot;, &quot;k&quot;, &quot;n&quot;, &quot;n&quot;, &quot;n&quot;, &quot;t&quot;, &quot;l&quot;, &quot;l&quot;, &quot;l&quot;, &quot;l&quot;, &quot;l&quot;, &quot;l&quot;, &quot;l&quot;, &quot;l&quot;, &quot;m&quot;, &quot;p&quot;, &quot;p&quot;, &quot;s&quot;, &quot;ss&quot;, &quot;ng&quot;, &quot;j&quot;, &quot;ch&quot;, &quot;k&quot;, &quot;t&quot;, &quot;p&quot;, &quot;h&quot;];

		$returnValue = '';

		// UTF-8로 변환된 문장을 유니코드로 변환한다.
		$result = static::utf8ToUnicode($text);

		// 유니코드로 변환된 글이 한글코드 안에 있으면 초중성으로 분리한다
		// 원본에서 약간 수정함. 한글 외 글자에서 중복패턴이 나오는 부분 수정함.
		// 단, 한글외 [0-9a-Z]는 확인했지만 그 외 문자에서는 확인 해 보지 않음.
		foreach ($result AS $key =&amp;gt; $val) {
			if ($val &amp;gt;= 44032 &amp;amp;&amp;amp; $val &amp;lt;= 55203) {
				$chr = &quot;&quot;;
				$code = $val;
				$temp1 = $code - 44032;
				$T = (int)$temp1 % 28;
				$temp1 /= 28;
				$V = (int)$temp1 % 21;
				$temp1 /= 21;
				$L = (int)$temp1;
				$chr .= $LCetable[$L] . $MVetable[$V] . $TCetable[$T];

				$returnValue .= ucfirst($chr);
			} else {
				$returnValue .= chr($val);
			}
		}
		return $returnValue;
	}

	static private function utf8ToUnicode($str)
	{
		$unicode = [];
		$values = [];
		$lookingFor = 1;

		for ($i = 0; $i &amp;lt; strlen($str); $i++) {
			$thisValue = ord($str[$i]);
			if ($thisValue &amp;lt; 128) {
				$unicode[] = $thisValue;
			} else {
				if (count($values) == 0) {
					$lookingFor = ($thisValue &amp;lt; 224) ? 2 : 3;
				}
				$values[] = $thisValue;
				if (count($values) == $lookingFor) {

					$number = ($lookingFor == 3) ?
						(($values[0] % 16) * 4096) + (($values[1] % 64) * 64) + ($values[2] % 64) :
						(($values[0] % 32) * 64) + ($values[1] % 64);

					$unicode[] = $number;
					$values = [];
					$lookingFor = 1;
				}
			}
		}
		return $unicode;
	}
}



참고자료 :


  URL Slugs in PHP (with UTF-8 and Transliteration Support)
  PHP han2eng</summary></entry><entry><title type="html">OSX에서 Facebook redex 사용시 Error writing mapping file: No such file or directory 오류 해결</title><link href="https://blog.asamaru.net/2016/11/16/redex-error-writing-mapping-file-no-such-file-or-directory/" rel="alternate" type="text/html" title="OSX에서 Facebook redex 사용시 Error writing mapping file: No such file or directory 오류 해결" /><published>2016-11-16T19:12:50+09:00</published><updated>2016-11-16T19:12:50+09:00</updated><id>https://blog.asamaru.net/2016/11/16/redex-error-writing-mapping-file-no-such-file-or-directory</id><content type="html" xml:base="https://blog.asamaru.net/2016/11/16/redex-error-writing-mapping-file-no-such-file-or-directory/">&lt;p&gt;안드로이드 앱을 개발하면서 &lt;a href=&quot;http://fbredex.com/&quot;&gt;redex&lt;/a&gt;를 이용해 최적화를 하고 있다. 이미 proguard를 사용하고 있기 때문에 용량에서는 큰 차이가 나지 않지만 성능면에서 도움이 된다고 소개하고 있어 사용하는 것이다(체감으로는 잘 느끼지 못하겠다).&lt;/p&gt;

&lt;p&gt;그런데 오늘 redex에서 오류가 발생했다.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/facebook/redex/issues/185&quot;&gt;Error writing mapping file: No such file or directory&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;정확히는 내 작업 PC가 아닌 동료의 PC에서 redex를 사용하면서 발생했다. 내 작업 PC에서는 이상이 없어서 확인을 하던 중 redex의 버전 문제인가? 하고 최신 버전을 받아 빌드해서 실행해보니 동일한 오류가 발생했다.&lt;/p&gt;

&lt;p&gt;그래서 redex 소스를 뒤져서 원인을 확인하고 오류를 해결했다. 원인은 나중에 다시 언급하도록 하고 일단 해결 방법부터 보자.&lt;/p&gt;

&lt;p&gt;아래의 내용을 &lt;strong&gt;redex.conf&lt;/strong&gt; 파일로 저장한다(파일 이름은 상관없다).&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;redex&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;passes&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ReBindRefsPass&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;BridgePass&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;SynthPass&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;FinalInlinePass&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;DelSuperPass&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;SingleImplPass&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;SimpleInlinePass&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;StaticReloPass&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;RemoveEmptyClassesPass&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ShortenSrcStringsPass&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;ShortenSrcStringsPass&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;filename_mappings&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;filename_mappings.txt&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;그리고 redex 실행시 &lt;code class=&quot;highlighter-rouge&quot;&gt;-c CONFIG, --config CONFIG Configuration file&lt;/code&gt; 옵션을 추가하면 이 오류는 해결된다. 예를들면 아래와 같다(~~ 부분은 기존 옵션).&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;redex ~~ -c redex.conf
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;오류 해결을 위해 추가된 부분은 아래와 같다. 나머지 부분은 redex 소스의 &lt;code class=&quot;highlighter-rouge&quot;&gt;redex/config/default.config&lt;/code&gt; 파일 내용과 같다(이 파일이 기본 옵션이 저장된 파일이다).&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ShortenSrcStringsPass&quot;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;filename_mappings&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;filename_mappings.txt&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;이 문제의 원인은 &lt;code class=&quot;highlighter-rouge&quot;&gt;filename_mappings&lt;/code&gt; 옵션의 기본값인 &lt;code class=&quot;highlighter-rouge&quot;&gt;/tmp/filename_mappings.txt&lt;/code&gt; 때문이다. &lt;code class=&quot;highlighter-rouge&quot;&gt;/tmp/&lt;/code&gt; 폴더가 시스템 폴더로 redex에서 접근할 권한이 없기 때문에 해당 파일을 찾을 수 없다는 오류가 나는 것이다.&lt;/p&gt;

&lt;p&gt;아마도 머지않아 패치가 되겠지만 그 전에 이 오류가 발생하는 사람들에게 도움이 될 수 있기를 바라며 글을 남긴다.&lt;/p&gt;</content><author><name>유영재</name></author><summary type="html">안드로이드 앱을 개발하면서 redex를 이용해 최적화를 하고 있다. 이미 proguard를 사용하고 있기 때문에 용량에서는 큰 차이가 나지 않지만 성능면에서 도움이 된다고 소개하고 있어 사용하는 것이다(체감으로는 잘 느끼지 못하겠다).

그런데 오늘 redex에서 오류가 발생했다.

Error writing mapping file: No such file or directory

정확히는 내 작업 PC가 아닌 동료의 PC에서 redex를 사용하면서 발생했다. 내 작업 PC에서는 이상이 없어서 확인을 하던 중 redex의 버전 문제인가? 하고 최신 버전을 받아 빌드해서 실행해보니 동일한 오류가 발생했다.

그래서 redex 소스를 뒤져서 원인을 확인하고 오류를 해결했다. 원인은 나중에 다시 언급하도록 하고 일단 해결 방법부터 보자.

아래의 내용을 redex.conf 파일로 저장한다(파일 이름은 상관없다).

{
    &quot;redex&quot;: {
        &quot;passes&quot;: [
            &quot;ReBindRefsPass&quot;,
            &quot;BridgePass&quot;,
            &quot;SynthPass&quot;,
            &quot;FinalInlinePass&quot;,
            &quot;DelSuperPass&quot;,
            &quot;SingleImplPass&quot;,
            &quot;SimpleInlinePass&quot;,
            &quot;StaticReloPass&quot;,
            &quot;RemoveEmptyClassesPass&quot;,
            &quot;ShortenSrcStringsPass&quot;
        ]
    },
    &quot;ShortenSrcStringsPass&quot;: {
        &quot;filename_mappings&quot;: &quot;filename_mappings.txt&quot;
    }
}



그리고 redex 실행시 -c CONFIG, --config CONFIG Configuration file 옵션을 추가하면 이 오류는 해결된다. 예를들면 아래와 같다(~~ 부분은 기존 옵션).

$ redex ~~ -c redex.conf



오류 해결을 위해 추가된 부분은 아래와 같다. 나머지 부분은 redex 소스의 redex/config/default.config 파일 내용과 같다(이 파일이 기본 옵션이 저장된 파일이다).

&quot;ShortenSrcStringsPass&quot;: {
    &quot;filename_mappings&quot;: &quot;filename_mappings.txt&quot;
}



이 문제의 원인은 filename_mappings 옵션의 기본값인 /tmp/filename_mappings.txt 때문이다. /tmp/ 폴더가 시스템 폴더로 redex에서 접근할 권한이 없기 때문에 해당 파일을 찾을 수 없다는 오류가 나는 것이다.

아마도 머지않아 패치가 되겠지만 그 전에 이 오류가 발생하는 사람들에게 도움이 될 수 있기를 바라며 글을 남긴다.</summary></entry><entry><title type="html">리눅스에서 모든 빈 디렉토리 찾기 / 지우기</title><link href="https://blog.asamaru.net/2016/11/15/linux-find-empty-directory-and-delete/" rel="alternate" type="text/html" title="리눅스에서 모든 빈 디렉토리 찾기 / 지우기" /><published>2016-11-15T15:00:34+09:00</published><updated>2016-11-15T15:00:34+09:00</updated><id>https://blog.asamaru.net/2016/11/15/linux-find-empty-directory-and-delete</id><content type="html" xml:base="https://blog.asamaru.net/2016/11/15/linux-find-empty-directory-and-delete/">&lt;p&gt;리눅스에서 지정한 디렉토리 하위의 모든 빈 디렉토리를 찾거나 지우려면 어떻게 하면 될까?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://linux.die.net/man/1/find&quot;&gt;find&lt;/a&gt; 명령을 사용하면 아주 간단히 해결할 수 있다.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;find . -empty -type d -delete -print
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;위 명령을 사용하면 현재 폴더 하위의 모든 빈 디렉토리를 찾아 출력하고 지운다.&lt;/p&gt;

&lt;p&gt;빈 디렉토리를 찾기만 하려면 &lt;code class=&quot;highlighter-rouge&quot;&gt;-delete&lt;/code&gt;를 제외하면 되고 반대로 출력없이 모두 지우려면 &lt;code class=&quot;highlighter-rouge&quot;&gt;-print&lt;/code&gt;를 제외하면 된다.&lt;/p&gt;

&lt;p&gt;폴더를 지정하려면 당연히 &lt;code class=&quot;highlighter-rouge&quot;&gt;.&lt;/code&gt; 대신에 원하는 경로를 넣으면 되고 &lt;a href=&quot;https://linux.die.net/man/1/find&quot;&gt;find&lt;/a&gt;의 다양한 옵션을 사용해서 원하는 조건을 추가해서 처리 할 수 있다.&lt;/p&gt;</content><author><name>유영재</name></author><summary type="html">리눅스에서 지정한 디렉토리 하위의 모든 빈 디렉토리를 찾거나 지우려면 어떻게 하면 될까?

find 명령을 사용하면 아주 간단히 해결할 수 있다.

find . -empty -type d -delete -print



위 명령을 사용하면 현재 폴더 하위의 모든 빈 디렉토리를 찾아 출력하고 지운다.

빈 디렉토리를 찾기만 하려면 -delete를 제외하면 되고 반대로 출력없이 모두 지우려면 -print를 제외하면 된다.

폴더를 지정하려면 당연히 . 대신에 원하는 경로를 넣으면 되고 find의 다양한 옵션을 사용해서 원하는 조건을 추가해서 처리 할 수 있다.</summary></entry></feed>
