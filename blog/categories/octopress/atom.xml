<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Octopress | 이 세상에 하나는 남기고 가자]]></title>
  <link href="http://blog.asamaru.net/blog/categories/octopress/atom.xml" rel="self"/>
  <link href="http://blog.asamaru.net/"/>
  <updated>2015-09-05T06:32:12+09:00</updated>
  <id>http://blog.asamaru.net/</id>
  <author>
    <name><![CDATA[유영재]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[옥토프레스 Category List 플러그인 설치]]></title>
    <link href="http://blog.asamaru.net/2015/08/28/octopress-category-list-plugin-install/"/>
    <updated>2015-08-28T20:45:21+09:00</updated>
    <id>http://blog.asamaru.net/2015/08/28/octopress-category-list-plugin-install</id>
    <content type="html"><![CDATA[<p>이번엔 옥토프레스에 category list 플러그인을 추가해 보았다.</p>

<p>사실 현재 시점에서 쓰고 있는 테마를 선택한 이유가 우측에 나오는 카테고리 목록이었다. 그런데 막상 테마를 설치한 후에도 카테고리 목록이 보이지 않았다. 처음엔 설정이 누락되어서 그렇다고 생각했고 시간이 없어서 그냥 두다가 오늘에서야 추가를 하고자 확인해 봤다.</p>

<p>현재 시점에 사용하고 있는 테마는 <a href="" title="https://github.com/kAworu/octostrap3">octostrap3</a>다. 해당 소스를 뒤져서 aside에 추가하는 부분은 찾았으나 테마엔 그 파일이 없었다. 그럼 이사람은 없는 파일을 어떻게 불러서 쓴단 말인가?</p>

<p>알아보니 별도 플러그인을 추가해야만 했다.
<a href="https://github.com/ctdk/octopress-category-list">https://github.com/ctdk/octopress-category-list</a>
현재 내가 적용한 플러그인이다. 최근 업데이트가 시점이 오래되어 조금 미심쩍지만 대안이 없다.</p>

<p>일단 설명이 된대로 소스를 받아서 안내하는 경로에 집어 넣었다.
그리고 octostrap3에서 사용하던것 처럼 _config.xml 파일에 추가 했다.일단 사이드 영역에 &ldquo;custom/asides/category_list.html"를 추가.</p>

<blockquote><p>default_asides: [asides/recent_posts.html, custom/asides/category_list.html, asides/github.html, asides/delicious.html, asides/pinboard.html, asides/googleplus.html]</p></blockquote>

<p>그리고는 정상적으로 적용이 되는지 확인.</p>

<pre><code class="bash">$ rake generate
## Generating Site with Jekyll
Configuration file: /Volumes/Data/DropBox/blog/_config.yml
            Source: source
       Destination: public/blog
      Generating...
  Liquid Exception: undefined method `+' for nil:NilClass in _layouts/page.html
jekyll 2.5.3 | Error:  undefined method `+' for nil:NilClass
</code></pre>

<p>하지만 오류.. 이런.. 불친절하게 어디가 문제인지 명확히 알려주지 않는다. 무작정 소스를 봤다. ruby를 아예 모르는 관계로 봐도 모르겠다. 하지만 nil 오류라고 하니 값이 없는 것이 문제라는 생각에 의심되는 부분들을 보다가 발견한 부분..</p>

<pre><code class="ruby">def render(context)
  lists = {}
  max, min = 1, 1
  config = context.registers[:site].config
  category_dir = config['root'] + config['category_dir'] + '/'
  categories = context.registers[:site].categories
  categories.keys.sort_by{ |str| str.downcase }.each do |category|
    count = categories[category].count
    lists[category] = count
    max = count if count &gt; max
  end
</code></pre>

<p>여기서 config[&lsquo;root&rsquo;] 이 부분이 문제 였다. 내 _config.xml 파일에서는 &ldquo;root:&rdquo; 부분을 비워두었다. 하위 폴더를 사용하지 않기 때문에. 여기에 값이 없어서 오류. 그래서 &ldquo;root: /"로 수정.</p>

<p>다시 시도.</p>

<pre><code class="bash">$ rake generate
</code></pre>

<p>이젠 된다. 카테고리 목록도 잘 나온다.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[옥토프레스 Rake Deploy에서 오류가 날 경우]]></title>
    <link href="http://blog.asamaru.net/2015/08/20/octopress-rake-deploy-error/"/>
    <updated>2015-08-20T22:56:20+09:00</updated>
    <id>http://blog.asamaru.net/2015/08/20/octopress-rake-deploy-error</id>
    <content type="html"><![CDATA[<p>옥토프레스를 설치하고 테스트 포스팅을 한 후 본격적으로 세팅을 하려고 시작했다.
도메인도 세팅하고 구글 어날리틱스, disqus 등도 연결을 하고자 _config.xml 파일을 수정하고 몇가지 글도 포스팅하려고 저장 후 generate 했다.</p>

<p>이제 배포를 하려고 rake deploy를 하니 아래와 같은 오류가 나타났다.</p>

<pre><code class="bash">To https://github.com/asamaru7/blog.git
 ! [rejected]        gh-pages -&gt; gh-pages (non-fast-forward)
error: failed to push some refs to 'https://github.com/asamaru7/blog.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Integrate the remote changes (e.g.
hint: 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.
</code></pre>

<p>구글에서 검색해서 여러가지 방법들을 따라 시도해도 진행이 되지 않다가 발견한 stackoverflow에서 강제 업데이트하는 방법을 안내하고 있었다.</p>

<pre><code class="bash">vi Rakefile
</code></pre>

<p>Rakefile을 열어 deploy_branch로 검색하다 보면 아래와 같은 부분을 볼 수 있다.</p>

<pre><code class="ruby">desc "deploy public directory to github pages"
multitask :push do
  puts "## Deploying branch to Github Pages "
  puts "## Pulling any updates from Github Pages "
  cd "#{deploy_dir}" do
    Bundler.with_clean_env { system "git pull" }
  end
  (Dir["#{deploy_dir}/*"]).each { |f| rm_rf(f) }
  Rake::Task[:copydot].invoke(public_dir, deploy_dir)
  puts "\n## Copying #{public_dir} to #{deploy_dir}"
  cp_r "#{public_dir}/.", deploy_dir
  cd "#{deploy_dir}" do
    system "git add -A"
    message = "Site updated at #{Time.now.utc}"
    puts "\n## Committing: #{message}"
    system "git commit -m \"#{message}\""
    puts "\n## Pushing generated #{deploy_dir} website"
    Bundler.with_clean_env { system "git push origin #{deploy_branch}" }
    puts "\n## Github Pages deploy complete"
  end
end
</code></pre>

<p>여기서 고칠 부분은 <code>Bundler.with_clean_env { system "git push origin #{deploy_branch}" }</code> 이 부분이다.
<code>#{deploy_branch}"</code> 앞에 +를 붙여준다.</p>

<pre><code class="ruby">Bundler.with_clean_env { system "git push origin #{deploy_branch}" }
</code></pre>

<p>이제 저장후 나와서 다시 deploy&hellip;</p>

<pre><code class="bash">## Pushing generated _deploy website
Counting objects: 36, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (27/27), done.
Writing objects: 100% (36/36), 12.90 KiB | 0 bytes/s, done.
Total 36 (delta 14), reused 0 (delta 0)
To https://github.com/asamaru7/blog.git
 + 9295247...d6c0b14 gh-pages -&gt; gh-pages (forced update)
</code></pre>

<p>이번엔 gh-pages (forced update) 안내를 보여주며 push 성공.</p>
]]></content>
  </entry>
  
</feed>
