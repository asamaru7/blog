<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: octopress | 이 세상에 하나는 남기고 가자]]></title>
  <link href="http://blog.asamaru.net/blog/categories/octopress/atom.xml" rel="self"/>
  <link href="http://blog.asamaru.net/"/>
  <updated>2015-10-08T12:10:49+09:00</updated>
  <id>http://blog.asamaru.net/</id>
  <author>
    <name><![CDATA[유영재]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[구글 번역 사용시 특정 영역을 번역에서 제외하기]]></title>
    <link href="http://blog.asamaru.net/2015/09/18/google-translate-exclude-words/"/>
    <updated>2015-09-18T12:13:16+09:00</updated>
    <id>http://blog.asamaru.net/2015/09/18/google-translate-exclude-words</id>
    <content type="html"><![CDATA[<p>이 블로그에는 구글 번역 기능이 붙어 있다. 관련해서 포스팅한 글 <a href="/2015/09/05/octopress-google-translate/">옥토프레스에 구글 번역기 달기</a>도 있다.
현재 테스트로 몇가지 언어를 선택 가능하도록 하고 사용중인데 문제가 생겼다. 기존에는 기능을 달아 놓고 번역이 되는 것만 확인하고는 자세히 보지 않아서 몰랐는데 오늘 확인하니 소스 코드까지 부분적으로 번역이 되는 것이 아닌가. 사실 이 블로그의 주된 내용이 프로그래밍 관련이라 코드 블록이 아주 많다.
그래서 방법을 구글 번역 메뉴얼에서 보니 다음과 같은 방법이 나와있었다.</p>

<h2>부분적으로 번역 제외하기</h2>

<p>해당 영역을 둘러싸고 있는 Tag에 notranslate Class를 준다.</p>

<pre><code class="html">&lt;span class="notranslate"&gt;번역하지 말아야 할 영역&lt;/span&gt;
</code></pre>

<h2>문서 전체를 번역 제외하기</h2>

<p>Html의 head 영역에 아래의 Meta 정보를 추가한다.</p>

<pre><code class="html">&lt;meta name="google" content="notranslate"&gt;
</code></pre>

<h2>옥토프레스에 적용하기</h2>

<p>문제는 옥토프레스의 결과 HTML은 직접 만드는 것이 아니라는 것이다. 여러가지 방법이 있을 수 있으나 나는 code block만 검색에서 제외되면 되므로 그냥 관련 플러그인을 수정해 버렸다. <code>backtick_code_block.rb</code> 파일에서 <code>&lt;figure class='code'&gt;</code> 부분을 찾아서 <code>&lt;figure class='code notranslate'&gt;</code>로 바꿔 버렸다.</p>

<p>이것으로 모든 것이 해결된 것은 아니다. 문장 내에서 사용된 코드 블록은 backtick_code_block 플러그인에서 처리하지 않으니 다른 플러그인을 고쳐야 하는데 어딘지 찾지 못했다. 아마도 markdown 해석 플러그인 내부에 있을텐데 gem으로 설치된 것인지 내부에서는 보이지 않는 듯하다(사실 귀찮아서 자세히 찾지 않았다. 게다가 Ruby를 거의 모른다.)</p>

<p>어쨌든 이로써 소스 코드 영역은 번역에서 제외되어 조금은 나아졌다.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[옥토프레스에 구글 번역기 달기]]></title>
    <link href="http://blog.asamaru.net/2015/09/05/octopress-google-translate/"/>
    <updated>2015-09-05T06:47:14+09:00</updated>
    <id>http://blog.asamaru.net/2015/09/05/octopress-google-translate</id>
    <content type="html"><![CDATA[<p>구글에서는 웹사이트에 여러가지 언어로 번역해서 보여줄 수 있는 기능을 제공해 준다.
이 블로그에 한국어가 아닌 다른 언어를 사용하는 사람이 누가 오겠냐만은 이 블로그는 여러가지 실험을 하기 위한 블로그이므로 구글 번역기도 달아봤다. 생각보다 간단하다.</p>

<h2>구글 번역 스크립트 생성</h2>

<p><a href="http://translate.google.com/manager/website/">http://translate.google.com/manager/website/</a></p>

<p><img src="/img/2015-09-05-octopress-google-translate-1.png" title="웹사이트에 지금 추가" alt="웹사이트에 지금 추가" /></p>

<p>&ldquo;웹사이트에 지금 추가"를 눌러 다음으로.</p>

<p><img src="/img/2015-09-05-octopress-google-translate-2.png" alt="웹사이트 정보" /></p>

<p>번역기를 넣을 웹사이트 주소를 입력하고 언어 선택 후 다음.</p>

<p><img src="/img/2015-09-05-octopress-google-translate-3.png" alt="플러그인 설정" /></p>

<p>원하는 옵션을 선택하고 다음.</p>

<p><img src="/img/2015-09-05-octopress-google-translate-4.png" alt="플러그인 추가" /></p>

<p>번역 스크립트 완성. 이제 이 스크립트를 복사해서 원하는 곳에 넣으면 끝이다.</p>

<h2>옥토프레스에 추가</h2>

<p>옥토프레스에 추가하는 방법은 템플릿 html 어딘가에(노출을 원하는 위치) 넣으면 끝이다.
맨 상단 메뉴에 넣고 싶다면 source/_includes/navigation.html 파일 내부에 원하는 곳에 넣으면 된다. 당연히 하단, 본문 등 원하는 곳에 그냥 넣으면 끝이다.</p>

<p>하지만. 난 우측 aside 영역에 넣기로 했다. 그리고 그냥 넣지않고 파일을 분리하기로 했다. 플러그인 처럼.</p>

<pre><code class="bash">vi source/_includes/custom/asides/google_translate.html
</code></pre>

<p>우선 google_translate.html을 열어 구글에서 제공해준 스크립트를 넣는다.</p>

<pre><code class="bash">vi _config.yml
</code></pre>

<p>_config.yml 파일을 열어 아래처럼 default_asides 항목에 생성한 파일을 넣어준다.(원하는 순서에)</p>

<pre><code class="yml">default_asides: [custom/asides/google_translate.html, ...]
</code></pre>

<p>이것으로 끝.</p>

<p>확인을 위해</p>

<pre><code class="bash">rake generate
rake deploy
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[옥토프레스 category list 플러그인 설치]]></title>
    <link href="http://blog.asamaru.net/2015/08/28/octopress-category-list-plugin-install/"/>
    <updated>2015-08-28T20:45:21+09:00</updated>
    <id>http://blog.asamaru.net/2015/08/28/octopress-category-list-plugin-install</id>
    <content type="html"><![CDATA[<p>이번엔 옥토프레스에 category list 플러그인을 추가해 보았다.</p>

<p>사실 현재 시점에서 쓰고 있는 테마를 선택한 이유가 우측에 나오는 카테고리 목록이었다. 그런데 막상 테마를 설치한 후에도 카테고리 목록이 보이지 않았다. 처음엔 설정이 누락되어서 그렇다고 생각했고 시간이 없어서 그냥 두다가 오늘에서야 추가를 하고자 확인해 봤다.</p>

<p>현재 시점에 사용하고 있는 테마는 <a href="" title="https://github.com/kAworu/octostrap3">octostrap3</a>다. 해당 소스를 뒤져서 aside에 추가하는 부분은 찾았으나 테마엔 그 파일이 없었다. 그럼 이사람은 없는 파일을 어떻게 불러서 쓴단 말인가?</p>

<p>알아보니 별도 플러그인을 추가해야만 했다.
<a href="https://github.com/ctdk/octopress-category-list">https://github.com/ctdk/octopress-category-list</a>
현재 내가 적용한 플러그인이다. 최근 업데이트가 시점이 오래되어 조금 미심쩍지만 대안이 없다.</p>

<p>일단 설명이 된대로 소스를 받아서 안내하는 경로에 집어 넣었다.
그리고 octostrap3에서 사용하던것 처럼 _config.xml 파일에 추가 했다.일단 사이드 영역에 &ldquo;custom/asides/category_list.html"를 추가.</p>

<blockquote><p>default_asides: [asides/recent_posts.html, custom/asides/category_list.html, asides/github.html, asides/delicious.html, asides/pinboard.html, asides/googleplus.html]</p></blockquote>

<p>그리고는 정상적으로 적용이 되는지 확인.</p>

<pre><code class="bash">$ rake generate
## Generating Site with Jekyll
Configuration file: /Volumes/Data/DropBox/blog/_config.yml
            Source: source
       Destination: public/blog
      Generating...
  Liquid Exception: undefined method `+' for nil:NilClass in _layouts/page.html
jekyll 2.5.3 | Error:  undefined method `+' for nil:NilClass
</code></pre>

<p>하지만 오류.. 이런.. 불친절하게 어디가 문제인지 명확히 알려주지 않는다. 무작정 소스를 봤다. ruby를 아예 모르는 관계로 봐도 모르겠다. 하지만 nil 오류라고 하니 값이 없는 것이 문제라는 생각에 의심되는 부분들을 보다가 발견한 부분..</p>

<pre><code class="ruby">def render(context)
  lists = {}
  max, min = 1, 1
  config = context.registers[:site].config
  category_dir = config['root'] + config['category_dir'] + '/'
  categories = context.registers[:site].categories
  categories.keys.sort_by{ |str| str.downcase }.each do |category|
    count = categories[category].count
    lists[category] = count
    max = count if count &gt; max
  end
</code></pre>

<p>여기서 config[&lsquo;root&rsquo;] 이 부분이 문제 였다. 내 _config.xml 파일에서는 &ldquo;root:&rdquo; 부분을 비워두었다. 하위 폴더를 사용하지 않기 때문에. 여기에 값이 없어서 오류. 그래서 &ldquo;root: /"로 수정.</p>

<p>다시 시도.</p>

<pre><code class="bash">$ rake generate
</code></pre>

<p>이젠 된다. 카테고리 목록도 잘 나온다.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[옥토프레스 rake deploy에서 오류가 날 경우]]></title>
    <link href="http://blog.asamaru.net/2015/08/20/octopress-rake-deploy-error/"/>
    <updated>2015-08-20T22:56:20+09:00</updated>
    <id>http://blog.asamaru.net/2015/08/20/octopress-rake-deploy-error</id>
    <content type="html"><![CDATA[<p>옥토프레스를 설치하고 테스트 포스팅을 한 후 본격적으로 세팅을 하려고 시작했다.
도메인도 세팅하고 구글 어날리틱스, disqus 등도 연결을 하고자 _config.xml 파일을 수정하고 몇가지 글도 포스팅하려고 저장 후 generate 했다.</p>

<p>이제 배포를 하려고 rake deploy를 하니 아래와 같은 오류가 나타났다.</p>

<pre><code class="bash">To https://github.com/asamaru7/blog.git
 ! [rejected]        gh-pages -&gt; gh-pages (non-fast-forward)
error: failed to push some refs to 'https://github.com/asamaru7/blog.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Integrate the remote changes (e.g.
hint: 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.
</code></pre>

<p>구글에서 검색해서 여러가지 방법들을 따라 시도해도 진행이 되지 않다가 발견한 stackoverflow에서 강제 업데이트하는 방법을 안내하고 있었다.</p>

<pre><code class="bash">vi Rakefile
</code></pre>

<p>Rakefile을 열어 deploy_branch로 검색하다 보면 아래와 같은 부분을 볼 수 있다.</p>

<pre><code class="ruby">desc "deploy public directory to github pages"
multitask :push do
  puts "## Deploying branch to Github Pages "
  puts "## Pulling any updates from Github Pages "
  cd "#{deploy_dir}" do
    Bundler.with_clean_env { system "git pull" }
  end
  (Dir["#{deploy_dir}/*"]).each { |f| rm_rf(f) }
  Rake::Task[:copydot].invoke(public_dir, deploy_dir)
  puts "\n## Copying #{public_dir} to #{deploy_dir}"
  cp_r "#{public_dir}/.", deploy_dir
  cd "#{deploy_dir}" do
    system "git add -A"
    message = "Site updated at #{Time.now.utc}"
    puts "\n## Committing: #{message}"
    system "git commit -m \"#{message}\""
    puts "\n## Pushing generated #{deploy_dir} website"
    Bundler.with_clean_env { system "git push origin #{deploy_branch}" }
    puts "\n## Github Pages deploy complete"
  end
end
</code></pre>

<p>여기서 고칠 부분은 <code>Bundler.with_clean_env { system "git push origin #{deploy_branch}" }</code> 이 부분이다.
<code>#{deploy_branch}"</code> 앞에 +를 붙여준다.</p>

<pre><code class="ruby">Bundler.with_clean_env { system "git push origin #{deploy_branch}" }
</code></pre>

<p>이제 저장후 나와서 다시 deploy&hellip;</p>

<pre><code class="bash">## Pushing generated _deploy website
Counting objects: 36, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (27/27), done.
Writing objects: 100% (36/36), 12.90 KiB | 0 bytes/s, done.
Total 36 (delta 14), reused 0 (delta 0)
To https://github.com/asamaru7/blog.git
 + 9295247...d6c0b14 gh-pages -&gt; gh-pages (forced update)
</code></pre>

<p>이번엔 gh-pages (forced update) 안내를 보여주며 push 성공.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopress 설치]]></title>
    <link href="http://blog.asamaru.net/2015/08/19/octopress-install/"/>
    <updated>2015-08-19T23:29:26+09:00</updated>
    <id>http://blog.asamaru.net/2015/08/19/octopress-install</id>
    <content type="html"><![CDATA[<h1>Octopress 설치</h1>

<p><a href="http://octopress.org/">Octopress</a>는 <a href="http://jekyllrb.com/">Jekyll</a>을 위해 디자인된 프레임워크다.
Jekyll은 Github pages를 이용한 정적 블로깅 엔진으로 무료로 블로그 사이트를 생성할 수 있다.
하지만 해커들을 위한 블로깅 프레임워크이라고도 불리는 Jekyll은 사용이 그리 간단하지만은 않다.
자세한 내용은 검색하면 많이 찾을 수 있으니 그만 넘어가자.</p>

<h2>기본 설치</h2>

<p>Octopress에 안내된 설치방법은 아래의 사이트를 참고하자.
<a href="http://octopress.org/docs/setup/">http://octopress.org/docs/setup/</a></p>

<p>하지만 위의 설명대로 잘 되지 않는다면 아래의 내용을 참고해 볼수도 있다. 나의 경우엔 설치가 그리 쉽지만은 않았다.</p>

<p>우선 설치 환경은 osx 10.10 기준이다.</p>

<p>이미 git, brew 등은 설치가 되어있었기 때문에 rvm으로 ruby 1.9.3을 설치하려고 했으나 아래와 같은 오류를 만났다.</p>

<h3>오류 : requirements_osx_brew_libs_install gcc49 openssl</h3>

<pre><code class="bash">$ sudo rvm install 1.9.3
Searching for binary rubies, this might take some time.
No binary rubies available for: osx/10.10/x86_64/ruby-1.9.3-p551.
Continuing with compilation. Please read 'rvm help mount' to get more information on binary rubies.
Checking requirements for osx.
Installing requirements for osx.
Updating system.....
Installing required packages: gcc49, openssl....
Error running 'requirements_osx_brew_libs_install gcc49 openssl',
showing last 15 lines of /Users/yyj/.rvm/log/1439982916_ruby-1.9.3-p551/package_install_gcc49_openssl.log
++ case "$1" in
++ [[ -t 1 ]]
++ return 1
++ printf %b 'There were package installation errors, make sure to read the log.

Try `brew tap --repair` and make sure `brew doctor` looks reasonable.

Check Homebrew requirements https://github.com/Homebrew/homebrew/wiki/Installation\n'
There were package installation errors, make sure to read the log.

Try `brew tap --repair` and make sure `brew doctor` looks reasonable.

Check Homebrew requirements https://github.com/Homebrew/homebrew/wiki/Installation
++ case "$_system_version" in
++ return 1
Requirements installation failed with status: 1.
</code></pre>

<p>우선 안내에 나온대로 <code>brew tap --repair</code>와 <code>brew doctor</code>를 실행해서 안내하는대로 처리를 완료했음에도 문제는 해결이 되지 않았다.
그래서 다음과 같이 rvm에서 필요로하는 lib을 먼저 설치했다.</p>

<pre><code class="bash">$ rvm get head --autolibs=3
$ rvm requirements
</code></pre>

<p>재시도 &hellip;</p>

<pre><code class="bash">$ sudo rvm install 1.9.3
</code></pre>

<p>이번엔 오류가 나지않고 ruby를 다운로드 시작&hellip; 그러나 엄청나게 느림&hellip; 중간에 끊어짐&hellip; 이런&hellip;
오랜 기다림 끝에 이제 ruby 1.9.3 설치 완료.
이제 ruby 1.9.3을 사용하도록 하고&hellip;</p>

<pre><code class="bash">$ rvm use 1.9.3
$ rvm rubygems latest
</code></pre>

<p>그다음은 공식 사이트 설명대로&hellip; 단, Octopress를 clone 받은 경로로 가서&hellip;</p>

<pre><code class="bash">$ gem install bundler
</code></pre>

<p>이번엔 그냥 넘아가나 했더니 아래와 같은 오류&hellip;</p>

<pre><code class="bash">ERROR:  Could not find a valid gem 'bundler' (&gt;= 0), here is why:
          Unable to download data from https://rubygems.org/ - server did not return a valid file (https://rubygems.org/latest_specs.4.8.gz)
</code></pre>

<p>이번에도 아래와 같이 하고&hellip;</p>

<pre><code class="bash">$ rvm use 1.9.3
Using /Users/yyj/.rvm/gems/ruby-1.9.3-p551
$ rvm rubygems latest
</code></pre>

<p> 재시도&hellip;</p>

<pre><code class="bash">$ gem install bundler
</code></pre>

<p>이번엔 퍼미션 에러&hellip;</p>

<pre><code class="bash">$ sudo gem install bundler
</code></pre>

<p>드디어 설치.</p>

<pre><code class="bash">$ rbenv rehash # 이건 필요시에만 한다고하니 명령이 없다는 오류가 나면 무시
$ bundle install
</code></pre>

<p>이번에도 <code>bundle install</code>에서 퍼미션 에러&hellip;</p>

<pre><code class="bash">$ sudo bundle install
</code></pre>

<p>아.. 드디어 기본 설치 완료</p>

<h2>테마설치</h2>

<p>기본 테마 설치</p>

<pre><code class="bash">$ rake install
</code></pre>

<p>다른 테마를 원한다면 <a href="https://github.com/imathis/octopress/wiki/3rd-Party-Octopress-Themes">https://github.com/imathis/octopress/wiki/3rd-Party-Octopress-Themes</a> 에 가서 고르면 된다.</p>

<p>설치는 다음과 같이</p>

<pre><code class="bash">$ git clone https://github.com/~~~.git .themes/테마이름
$ rake install['테마이름']
</code></pre>

<p>octostrap3 테마 적용 예시.</p>

<pre><code class="bash">% git clone https://github.com/kAworu/octostrap3.git .themes/octostrap3
% rake install["octostrap3"]
</code></pre>

<h2>설정</h2>

<p>아래와 같이 명령을 실행하고 생성해둔 github 프로젝트 주소를 넣으면 설치는 완료된다.</p>

<pre><code class="bash">$ rake setup_github_pages
Enter the read/write url for your repository
(For example, 'git@github.com:your_username/your_username.github.io.git)
           or 'https://github.com/your_username/your_username.github.io')
Repository url: https://github.com/~~~/~~~.git
</code></pre>

<h2>배포</h2>

<p>아직 작성한 글이 아무것도 없지만 일단 deploy 해본다.</p>

<pre><code class="bash">$ rake generate
$ rake deploy
</code></pre>

<p>deploy를 하고나면 기본적으로 생성해 주는 아주 간단한 index.html 파일이 push되어 있는 것을 볼 수 있다.</p>

<p>이제 페이지가 정상적으로 뜨는지만 확인하면 기본 설치는 모두 완료.</p>

<h2>repository 연결</h2>

<p>블로그는 gh-pages branch로 연결되어 있으니 원소스를 master로 연결하여 백업의 역할을 할 수 있도록 설정해보자.</p>

<pre><code class="bash">$ git remote add origin https://github.com/~~~/~~~.git
$ git config branch.master.remote origin

$ git push
</code></pre>

<h2>독립 도메인 연결</h2>

<p>이왕이면 내 도메인도 연결해보자. 아래의 명령은 CNAME 파일을 통해 도메인 연결을 github에 알려주는 것으로 이후 deploy가 될 때 이 파일이 함께 배포되면 적용된다. 단, 도메인을 변경했으므로 이에 맞춰 _config.yml 파일도 함께 수정해야 한다.</p>

<pre><code class="bash">$ echo 'blog.asamaru.net' &gt;&gt; source/CNAME
</code></pre>
]]></content>
  </entry>
  
</feed>
