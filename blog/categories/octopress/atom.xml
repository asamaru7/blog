<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: octopress | 이 세상에 하나는 남기고 가자]]></title>
  <link href="http://blog.asamaru.net/blog/categories/octopress/atom.xml" rel="self"/>
  <link href="http://blog.asamaru.net/"/>
  <updated>2015-12-02T21:57:11+09:00</updated>
  <id>http://blog.asamaru.net/</id>
  <author>
    <name><![CDATA[유영재]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Octopress : pygments cant parse unknown language: </p> 오류]]></title>
    <link href="http://blog.asamaru.net/2015/11/17/octopress-error-pygments-cant-parse-unknown-language/"/>
    <updated>2015-11-17T14:40:02+09:00</updated>
    <id>http://blog.asamaru.net/2015/11/17/octopress-error-pygments-cant-parse-unknown-language</id>
    <content type="html"><![CDATA[<p>Octopress에서 <code>rake generate</code>를 하다보면 아래와 같은 오류를 만나는 경우가 있다.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">jekyll 2.5.3 | Error:  Pygments can&#39;t parse unknown language: &lt;/p&gt;
</code></pre></div>
<p>Pygments는 소스코드 하이라이팅을 해주는 모듈인데 언어를 알 수 없다고 오류를 내는 것이다. markdown에서 소스코드는 ```로 시작하고 그 뒤에 붙여서 언어 종류를 지정할 수 있다(```ruby 와 같이).</p>

<p>위 오류가 발생한다는 것은 여기에 문제가 있다는 것인데 오류 메시지만 보면 어디서 발생하는 것인지 짐작이 안된다. 그래서 최근에 작성한 글을 다 둘러볼 수 밖에 없다. 그래서 찾아봤더니 <a href="http://reckhhh.github.io/blog/2015/05/01/octopress-error-pygments-cant-parse-unknown-language/">Octopress Error: Pygments Can’t Parse Unknown Language: &lt;/p&gt;</a>라는 글에서 방법을 알려주고 있었다. 정확하게는 오류를 해결해 주는 것이 아니라 위치를 조금 더 찾기 쉽게 해준다.</p>

<p>결론은 <code>plugins/pygments_code.rb</code>을 열어서 다음의 부분을 수정하면 된다(<code>#{code}</code>를 추가하는 것이다).</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">rescue</span> <span class="no">MentosError</span>
<span class="k">raise</span> <span class="s2">&quot;Pygments can&#39;t parse unknown language: </span><span class="si">#{</span><span class="n">lang</span><span class="si">}#{</span><span class="n">code</span><span class="si">}</span><span class="s2">.&quot;</span>
<span class="k">end</span>
</code></pre></div>
<p>이렇게 하면 위 오류가 날 때 해당 코드 영역을 함께 출력해준다.</p>

<p>사실 나의 경우엔 위 오류가 발생하는 경우의 대부분이 &quot;```ruby 파일명&quot; 형식을 사용할 때 발생했다. GFM에서는 이 형식을 지원하기 때문에 간혹 사용하려는데 이게 제대로 해석이 안되는 경우가 많다. 그렇다고 항상 안되는 것도 아니다. 원인은 알 수 없으나 octopress가 이럴 땐 맘에 들지 않는다.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopress에서 GitHub Flavored Markdown 사용하기(redcarpet)]]></title>
    <link href="http://blog.asamaru.net/2015/10/13/octopress-github-flavored-markdown-redcarpet/"/>
    <updated>2015-10-13T14:38:25+09:00</updated>
    <id>http://blog.asamaru.net/2015/10/13/octopress-github-flavored-markdown-redcarpet</id>
    <content type="html"><![CDATA[<p>옥토프레스에서는 markdown 해석기로 <a href="https://github.com/davidfstr/rdiscount">rdiscount</a>를 기본으로 사용하고 있다. 현재 사용해보니 rdiscount에서도 GitHub Flavored Markdown를 지원하는 것으로 보이는데 예전엔 제대로 지원이 안되고 있었는지 <a href="https://github.com/vmg/redcarpet">redcarpet</a>으로 바꾸서 사용하는 사람들이 많았다. 그래서 나도 바꿔 봤다.</p>

<p>변경을 위해 참고한 글은 다음과 같다.</p>

<ul>
<li><a href="http://blog.tdksk.com/2013/05/06/use-gfm-in-octopress.html">Octopress で GitHub Flavored Markdown (GFM) を使う</a></li>
<li><a href="http://yangsu.github.io/blog/2012/10/11/using-octopress-with-github-flavored-markdown-redcarpet/">Using Octopress With Github Flavored Markdown (RedCarpet)</a></li>
</ul>

<p>그런데 위 글들이 작성된 시점이 조금 오래되어서 그런지 그대로 따라해서는 정상적으로 적용이 되지 않았다. 그래서 몇가지를 수정해서 적용을 완료했다.</p>

<h2 id="redcarpet-설치">redcarpet 설치</h2>

<p>Gemfile에 아래의 내용을 추가 한다.</p>

<p><code>ruby Gemfile
gem &#39;redcarpet&#39;, &#39;~&gt; 3.3.2&#39;
gem &#39;albino&#39;, &#39;~&gt; 1.3.3&#39;
</code></p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="o">[</span>sudo<span class="o">]</span> bundle install
</code></pre></div>
<h2 id="redcarpet-플러그인-설치">redcarpet 플러그인 설치</h2>

<p>plugins/redcarpet2_markdown.rb 파일을 추가한다. 원본은 <a href="https://github.com/nono/Jekyll-plugins%EC%97%90">https://github.com/nono/Jekyll-plugins에</a> 가면 볼 수 있다. 거의 그대로인데 약간 수정을 했다.</p>

<p>```ruby plugins/redcarpet2_markdown.rb
require &#39;fileutils&#39;
require &#39;digest/md5&#39;
require &#39;redcarpet&#39;
require &#39;albino&#39;</p>

<h1 id="pygments_cache_dir-file-expand_path-39-cache-39-_file__">PYGMENTS_CACHE_DIR = File.expand_path(&#39;../../<em>cache&#39;, _</em>FILE__)</h1>

<p>FileUtils.mkdir_p(PYGMENTS_CACHE_DIR)</p>

<p>class Redcarpet2Markdown &lt; Redcarpet::Render::HTML
  def block_code(code, lang)
    lang = lang || &quot;text&quot;
    path = File.join(PYGMENTS_CACHE_DIR, &quot;#{lang}-#{Digest::MD5.hexdigest code}.html&quot;)
    cache(path) do
      colorized = Albino.colorize(code, lang.downcase)
      add_code_tags(colorized, lang)
    end
  end</p>

<p>def add_code_tags(code, lang)
    code.sub(/<pre>/, &quot;<pre><code class=\"#{lang}\">&quot;).
         sub(/&lt;\/pre&gt;/, &quot;</code></pre>&quot;)
  end</p>

<p>def cache(path)
    if File.exist?(path)
      File.read(path)
    else
      content = yield
      File.open(path, &#39;w&#39;) {|f| f.print(content) }
      content
    end
  end
end</p>

<p>class Jekyll::MarkdownConverter
  def extensions
    Hash[ *@config[&#39;redcarpet&#39;][&#39;extensions&#39;].map {|e| [e.to_sym, true] }.flatten ]
  end</p>

<p>def markdown
    @markdown ||= Redcarpet::Markdown.new(Redcarpet2Markdown.new(extensions), extensions)
  end</p>

<p>def convert(content)
    return super unless @config[&#39;markdown&#39;] == &#39;redcarpet&#39;
    markdown.render(content)
  end
end
```</p>

<h2 id="config-설정">config 설정</h2>

<p>_config.yml 파일을 열어서 rdiscount 부분을 아래와 같이 수정한다.</p>

<p>```yaml _config.yml</p>

<h1 id="markdown-rdiscount">markdown: rdiscount</h1>

<p>markdown: redcarpet
redcarpet:
  extensions: [&quot;no_intra_emphasis&quot;, &quot;fenced_code_blocks&quot;, &quot;autolink&quot;, &quot;tables&quot;, &quot;with_toc_data&quot;, &quot;strikethrough&quot;, &quot;superscript&quot;]</p>

<h1 id="rdiscount">rdiscount:</h1>

<h1 id="extensions">extensions:</h1>

<h1 id="autolink">- autolink</h1>

<h1 id="footnotes">- footnotes</h1>

<h1 id="smart">- smart</h1>
<div class="highlight"><pre><code class="language-text" data-lang="text">참고 사이트들 설명을 보면 extensions에 hard_wrap을 추가하라고 되어 있는데 나의 경우는 이 옵션을 추가하면 Pygments에서 오류가 났다.

이것으로 설치는 끝이다. generate를 해보면 페이지가 잘 생성된다.
</code></pre></div>]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[구글 번역 사용시 특정 영역을 번역에서 제외하기]]></title>
    <link href="http://blog.asamaru.net/2015/09/18/google-translate-exclude-words/"/>
    <updated>2015-09-18T12:13:16+09:00</updated>
    <id>http://blog.asamaru.net/2015/09/18/google-translate-exclude-words</id>
    <content type="html"><![CDATA[<p>이 블로그에는 구글 번역 기능이 붙어 있다. 관련해서 포스팅한 글 <a href="/2015/09/05/octopress-google-translate/">옥토프레스에 구글 번역기 달기</a>도 있다.
현재 테스트로 몇가지 언어를 선택 가능하도록 하고 사용중인데 문제가 생겼다. 기존에는 기능을 달아 놓고 번역이 되는 것만 확인하고는 자세히 보지 않아서 몰랐는데 오늘 확인하니 소스 코드까지 부분적으로 번역이 되는 것이 아닌가. 사실 이 블로그의 주된 내용이 프로그래밍 관련이라 코드 블록이 아주 많다.
그래서 방법을 구글 번역 메뉴얼에서 보니 다음과 같은 방법이 나와있었다.</p>

<h2 id="부분적으로-번역-제외하기">부분적으로 번역 제외하기</h2>

<p>해당 영역을 둘러싸고 있는 Tag에 notranslate Class를 준다.</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;notranslate&quot;</span><span class="nt">&gt;</span>번역하지 말아야 할 영역<span class="nt">&lt;/span&gt;</span>
</code></pre></div>
<h2 id="문서-전체를-번역-제외하기">문서 전체를 번역 제외하기</h2>

<p>Html의 head 영역에 아래의 Meta 정보를 추가한다.</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;google&quot;</span> <span class="na">content=</span><span class="s">&quot;notranslate&quot;</span><span class="nt">&gt;</span>
</code></pre></div>
<h2 id="옥토프레스에-적용하기">옥토프레스에 적용하기</h2>

<p>문제는 옥토프레스의 결과 HTML은 직접 만드는 것이 아니라는 것이다. 여러가지 방법이 있을 수 있으나 나는 code block만 검색에서 제외되면 되므로 그냥 관련 플러그인을 수정해 버렸다. <code>backtick_code_block.rb</code> 파일에서 <code>&lt;figure class=&#39;code&#39;&gt;</code> 부분을 찾아서 <code>&lt;figure class=&#39;code notranslate&#39;&gt;</code>로 바꿔 버렸다.</p>

<p>이것으로 모든 것이 해결된 것은 아니다. 문장 내에서 사용된 코드 블록은 backtick_code_block 플러그인에서 처리하지 않으니 다른 플러그인을 고쳐야 하는데 어딘지 찾지 못했다. 아마도 markdown 해석 플러그인 내부에 있을텐데 gem으로 설치된 것인지 내부에서는 보이지 않는 듯하다(사실 귀찮아서 자세히 찾지 않았다. 게다가 Ruby를 거의 모른다.)</p>

<p>어쨌든 이로써 소스 코드 영역은 번역에서 제외되어 조금은 나아졌다.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[옥토프레스에 구글 번역기 달기]]></title>
    <link href="http://blog.asamaru.net/2015/09/05/octopress-google-translate/"/>
    <updated>2015-09-05T06:47:14+09:00</updated>
    <id>http://blog.asamaru.net/2015/09/05/octopress-google-translate</id>
    <content type="html"><![CDATA[<p>구글에서는 웹사이트에 여러가지 언어로 번역해서 보여줄 수 있는 기능을 제공해 준다.
이 블로그에 한국어가 아닌 다른 언어를 사용하는 사람이 누가 오겠냐만은 이 블로그는 여러가지 실험을 하기 위한 블로그이므로 구글 번역기도 달아봤다. 생각보다 간단하다.</p>

<h2 id="구글-번역-스크립트-생성">구글 번역 스크립트 생성</h2>

<p><a href="http://translate.google.com/manager/website/">http://translate.google.com/manager/website/</a></p>

<p><img src="/img/2015-09-05-octopress-google-translate-1.png" alt="웹사이트에 지금 추가" title="웹사이트에 지금 추가"></p>

<p>&quot;웹사이트에 지금 추가&quot;를 눌러 다음으로.</p>

<p><img src="/img/2015-09-05-octopress-google-translate-2.png" alt="웹사이트 정보"></p>

<p>번역기를 넣을 웹사이트 주소를 입력하고 언어 선택 후 다음.</p>

<p><img src="/img/2015-09-05-octopress-google-translate-3.png" alt="플러그인 설정"></p>

<p>원하는 옵션을 선택하고 다음.</p>

<p><img src="/img/2015-09-05-octopress-google-translate-4.png" alt="플러그인 추가"></p>

<p>번역 스크립트 완성. 이제 이 스크립트를 복사해서 원하는 곳에 넣으면 끝이다.</p>

<h2 id="옥토프레스에-추가">옥토프레스에 추가</h2>

<p>옥토프레스에 추가하는 방법은 템플릿 html 어딘가에(노출을 원하는 위치) 넣으면 끝이다.
맨 상단 메뉴에 넣고 싶다면 source/_includes/navigation.html 파일 내부에 원하는 곳에 넣으면 된다. 당연히 하단, 본문 등 원하는 곳에 그냥 넣으면 끝이다.</p>

<p>하지만. 난 우측 aside 영역에 넣기로 했다. 그리고 그냥 넣지않고 파일을 분리하기로 했다. 플러그인 처럼.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">vi <span class="nb">source</span>/_includes/custom/asides/google_translate.html
</code></pre></div>
<p>우선 google_translate.html을 열어 구글에서 제공해준 스크립트를 넣는다.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">vi _config.yml
</code></pre></div>
<p>_config.yml 파일을 열어 아래처럼 default_asides 항목에 생성한 파일을 넣어준다.(원하는 순서에)</p>
<div class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="l-Scalar-Plain">default_asides</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">custom/asides/google_translate.html</span><span class="p-Indicator">,</span> <span class="nv">...</span><span class="p-Indicator">]</span>
</code></pre></div>
<p>이것으로 끝.</p>

<p>확인을 위해</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">rake generate
rake deploy
</code></pre></div>]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[옥토프레스 category list 플러그인 설치]]></title>
    <link href="http://blog.asamaru.net/2015/08/28/octopress-category-list-plugin-install/"/>
    <updated>2015-08-28T20:45:21+09:00</updated>
    <id>http://blog.asamaru.net/2015/08/28/octopress-category-list-plugin-install</id>
    <content type="html"><![CDATA[<p>이번엔 옥토프레스에 category list 플러그인을 추가해 보았다.</p>

<p>사실 현재 시점에서 쓰고 있는 테마를 선택한 이유가 우측에 나오는 카테고리 목록이었다. 그런데 막상 테마를 설치한 후에도 카테고리 목록이 보이지 않았다. 처음엔 설정이 누락되어서 그렇다고 생각했고 시간이 없어서 그냥 두다가 오늘에서야 추가를 하고자 확인해 봤다.</p>

<p>현재 시점에 사용하고 있는 테마는 <a href="%22https://github.com/kAworu/octostrap3%22">octostrap3</a>다. 해당 소스를 뒤져서 aside에 추가하는 부분은 찾았으나 테마엔 그 파일이 없었다. 그럼 이사람은 없는 파일을 어떻게 불러서 쓴단 말인가?</p>

<p>알아보니 별도 플러그인을 추가해야만 했다.
<a href="https://github.com/ctdk/octopress-category-list">https://github.com/ctdk/octopress-category-list</a>
현재 내가 적용한 플러그인이다. 최근 업데이트가 시점이 오래되어 조금 미심쩍지만 대안이 없다.</p>

<p>일단 설명이 된대로 소스를 받아서 안내하는 경로에 집어 넣었다.
그리고 octostrap3에서 사용하던것 처럼 <em>config.xml 파일에 추가 했다.일단 사이드 영역에 &quot;custom/asides/category</em>list.html&quot;를 추가.</p>

<blockquote>
<p>default_asides: [asides/recent_posts.html, custom/asides/category_list.html, asides/github.html, asides/delicious.html, asides/pinboard.html, asides/googleplus.html]</p>
</blockquote>

<p>그리고는 정상적으로 적용이 되는지 확인.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>rake generate
<span class="c">## Generating Site with Jekyll</span>
Configuration file: /Volumes/Data/DropBox/blog/_config.yml
            Source: <span class="nb">source</span>
<span class="nb">       </span>Destination: public/blog
      Generating...
  Liquid Exception: undefined method <span class="sb">`</span>+<span class="s1">&#39; for nil:NilClass in _layouts/page.html</span>
<span class="s1">jekyll 2.5.3 | Error:  undefined method `+&#39;</span> <span class="k">for</span> nil:NilClass
</code></pre></div>
<p>하지만 오류.. 이런.. 불친절하게 어디가 문제인지 명확히 알려주지 않는다. 무작정 소스를 봤다. ruby를 아예 모르는 관계로 봐도 모르겠다. 하지만 nil 오류라고 하니 값이 없는 것이 문제라는 생각에 의심되는 부분들을 보다가 발견한 부분..</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
  <span class="n">lists</span> <span class="o">=</span> <span class="p">{}</span>
  <span class="n">max</span><span class="p">,</span> <span class="n">min</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span>
  <span class="n">config</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">registers</span><span class="o">[</span><span class="ss">:site</span><span class="o">].</span><span class="n">config</span>
  <span class="n">category_dir</span> <span class="o">=</span> <span class="n">config</span><span class="o">[</span><span class="s1">&#39;root&#39;</span><span class="o">]</span> <span class="o">+</span> <span class="n">config</span><span class="o">[</span><span class="s1">&#39;category_dir&#39;</span><span class="o">]</span> <span class="o">+</span> <span class="s1">&#39;/&#39;</span>
  <span class="n">categories</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">registers</span><span class="o">[</span><span class="ss">:site</span><span class="o">].</span><span class="n">categories</span>
  <span class="n">categories</span><span class="o">.</span><span class="n">keys</span><span class="o">.</span><span class="n">sort_by</span><span class="p">{</span> <span class="o">|</span><span class="n">str</span><span class="o">|</span> <span class="n">str</span><span class="o">.</span><span class="n">downcase</span> <span class="p">}</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">category</span><span class="o">|</span>
    <span class="n">count</span> <span class="o">=</span> <span class="n">categories</span><span class="o">[</span><span class="n">category</span><span class="o">].</span><span class="n">count</span>
    <span class="n">lists</span><span class="o">[</span><span class="n">category</span><span class="o">]</span> <span class="o">=</span> <span class="n">count</span>
    <span class="n">max</span> <span class="o">=</span> <span class="n">count</span> <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="n">max</span>
  <span class="k">end</span>
</code></pre></div>
<p>여기서 config[&#39;root&#39;] 이 부분이 문제 였다. 내 _config.xml 파일에서는 &quot;root:&quot; 부분을 비워두었다. 하위 폴더를 사용하지 않기 때문에. 여기에 값이 없어서 오류. 그래서 &quot;root: /&quot;로 수정.</p>

<p>다시 시도.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>rake generate
</code></pre></div>
<p>이젠 된다. 카테고리 목록도 잘 나온다.</p>
]]></content>
  </entry>
  
</feed>
